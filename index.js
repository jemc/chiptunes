(()=>{var e={792:(e,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.AutoMap=void 0;class AutoMap extends Map{constructor(e){super(),this.vClass=e}getOrCreate(e){const a=this.get(e);if(a)return a;const i=new this.vClass;return this.set(e,i),i}}a.AutoMap=AutoMap},152:(e,a,i)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.BitMask=void 0;const n=i(708);class BitMask{constructor(e=16){const a=Math.ceil(e/16);this.data=new Uint16Array(a)}clear(){this.data.fill(0)}get(e){const a=e>>4,i=this.data[a];if(!i)return!1;return 0!=(i&1<<e%16)}set(e,a){const i=e>>4,t=1<<e%16;if(this.data.length<=i){const e=(0,n.roundUpToPowerOfTwo)(i+1),a=new Uint16Array(e).fill(0);a.set(this.data),this.data=a}return a?this.data[i]|=t:this.data[i]&=~t,!0}*bits(e=0,a){var i;a=null!=a?a:16*this.data.length;for(let n=e>>4;n<this.data.length;n++){const t=null!==(i=this.data[n])&&void 0!==i?i:0;for(let i=0;i<16;i++){const o=16*n+i;if(o<e)continue;if(o>=a)return;const r=0!=(t&1<<i);yield[r,o]}}}countOneBits(){let e=0;for(const a of this.data.values())e+=(0,n.countOneBits)(a);return e}isSuperSetOf(e){for(var a,i,n=0;n<this.data.length;n++){const t=null!==(a=this.data[n])&&void 0!==a?a:0,o=null!==(i=e.data[n])&&void 0!==i?i:0;if((o&t)!==o)return!1}return!0}rotatedRight(e,a=0,i){if((i=null!=i?i:16*this.data.length)<=a)return this;const n=i-a,t=new BitMask(16*this.data.length);for(const[o,r]of this.bits())if(!1!==o)if(r<a||r>=i)t.set(r,o);else{let i=r-e-a;for(;i<0;)i+=n;i+=a,t.set(i,o)}return t}toNumber(){let e=0;for(const a of this.data.reverse().values())e=65536*e+a;return e}}a.BitMask=BitMask},816:(e,a,i)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.MutableBox2=a.Box2=void 0;const n=i(164);class BaseBox2{constructor(e,a){this.center=e,this.radii=a}isEqualTo(e){return this.center.isEqualTo(e.center)&&this.radii.isEqualTo(e.radii)}doesContain(e){return!(Math.abs(e.x-this.center.x)>this.radii.x)&&!(Math.abs(e.y-this.center.y)>this.radii.y)}get x(){return this.center.x}get y(){return this.center.y}get x0(){return this.center.x-this.radii.x}get y0(){return this.center.y-this.radii.y}get x1(){return this.center.x+this.radii.x}get y1(){return this.center.y+this.radii.y}get width(){return this.radii.x+this.radii.x}get height(){return this.radii.y+this.radii.y}}class Box2 extends BaseBox2{constructor(e=new n.Vector2,a=new n.Vector2){super(e,a),this.center=e,this.radii=a}static fromLeftTopWidthHeight(e,a,i,t){const o=new n.Vector2(i/2,t/2);return new Box2(new n.Vector2(e+o.x,a+o.y),o)}__preventTypeConfusion(){return"immutable"}}a.Box2=Box2;a.MutableBox2=class MutableBox2 extends BaseBox2{constructor(e=new n.MutableVector2,a=new n.MutableVector2){super(e,a),this.center=e,this.radii=a}__preventTypeConfusion(){return"mutable"}copyFrom(e){return this.center.copyFrom(e.center),this.radii.copyFrom(e.radii),this}}},200:(e,a,i)=>{"use strict";var n;Object.defineProperty(a,"__esModule",{value:!0}),a.ButtonSourceSystem=a.ButtonSourceConfig=a.ButtonSource=a.ButtonState=a.Button=void 0;const t=i(700);var o;!function(e){e[e.Start=0]="Start",e[e.Select=1]="Select",e[e.Up=2]="Up",e[e.Down=3]="Down",e[e.Left=4]="Left",e[e.Right=5]="Right",e[e.A=6]="A",e[e.B=7]="B",e[e.X=8]="X",e[e.Y=9]="Y"}(o||(a.Button=o={}));a.ButtonState=class ButtonState{constructor(e){this.clock=e,this.pressedAt=new Array}capture(e){void 0===this.pressedAt[e]&&(this.pressedAt[e]=this.clock.frame+1)}release(e){delete this.pressedAt[e]}isPressed(e){return void 0!==this.pressedAt[e]}isPressedJustNow(e){return this.pressedAt[e]===this.clock.frame}};class ButtonSource{constructor(e,a){this.state=e,this.config=a}captureKeyboardEvent(e){const a=this.config.keyboard[e.code];return!!a&&void 0!==a.find((a=>{if(!a.ignoreModifiers){if(e.altKey!=!!a.alt)return!1;if(e.ctrlKey!=!!a.ctrl)return!1;if(e.shiftKey!=!!a.shift)return!1}return this.state.capture(a.button),!0}))}releaseKeyboardEvent(e){const a=this.config.keyboard[e.code];if(!a)return;let i=!1;for(const e of a)this.state.isPressed(e.button)&&(this.state.release(e.button),i=!0);return i}}a.ButtonSource=ButtonSource,n=ButtonSource,ButtonSource.componentId=(0,t.registerComponent)(n),a.ButtonSourceConfig={Default:{keyboard:{Enter:[{button:o.Start}],RightShift:[{button:o.Select}],ArrowUp:[{button:o.Up}],ArrowDown:[{button:o.Down}],ArrowLeft:[{button:o.Left}],ArrowRight:[{button:o.Right}],KeyW:[{button:o.Up}],KeyA:[{button:o.Left}],KeyS:[{button:o.Down}],KeyD:[{button:o.Right}],KeyZ:[{button:o.A}],KeyX:[{button:o.B}],KeyC:[{button:o.X}],KeyV:[{button:o.Y}],ControlRight:[{button:o.A}],AltRight:[{button:o.B}]}}},a.ButtonSourceSystem=function(e,a){const i=new Map;return a.addEventListener("keydown",(e=>{const a=e;for(const n of i.values())n.captureKeyboardEvent(a)&&e.preventDefault()})),a.addEventListener("keyup",(e=>{const a=e;for(const n of i.values())n.releaseKeyboardEvent(a)&&e.preventDefault()})),e.systemFor([ButtonSource],{runEachSet(e,a){i.set(e,a)},runEachRemoved(e){i.delete(e)}})}},840:(e,a,i)=>{"use strict";var n;Object.defineProperty(a,"__esModule",{value:!0}),a.ChildOf=void 0;const t=i(700);class ChildOf{constructor(e){this.parent=e}}a.ChildOf=ChildOf,n=ChildOf,ChildOf.componentId=(0,t.registerComponent)(n)},968:(e,a,i)=>{"use strict";var n;Object.defineProperty(a,"__esModule",{value:!0}),a.Clock=void 0;const t=null===(n=i.g.window)||void 0===n?void 0:n.requestAnimationFrame;a.Clock=class Clock{constructor(e=(()=>{}),a=(null!=t?t:void 0)){this.runFn=e,this.requestNextFrame=a,this.frame=0,this.timestamp=0,this.currentFramesPerSecond=0,this.alreadyStarted=!1,this.tickAndKeepRunningFn=this.tickAndKeepRunning.bind(this)}startRunning(){this.alreadyStarted||(this.requestNextFrame&&this.requestNextFrame(this.tickAndKeepRunningFn),this.alreadyStarted=!0)}tickAndKeepRunning(e){this.tick(e),t(this.tickAndKeepRunningFn)}tick(e){const a=1e3/(e-this.timestamp);if(this.slowMotionFactor&&this.slowMotionFactor>60/a)return;const i=this;i.frame++,i.timestamp=e,i.currentFramesPerSecond=a,this.runFn()}}},700:(e,a,i)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.newEntityPoolWithStaticComponentsReserved=a.getComponentClassById=a.registerComponent=void 0;const n=i(728),t=new n.EntityPool,o=[];a.registerComponent=function(e){if(Object.isFrozen(t))throw new Error("A component can only be registered statically before any world is created. After that they can only be registered dynamically with an individual world (which is not yet supported).");const a=t.alloc();return o[a]=e,a},a.getComponentClassById=function(e){return o[e]},a.newEntityPoolWithStaticComponentsReserved=function(){return Object.freeze(t),new n.EntityPool(t)}},912:(e,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0})},728:(e,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.EntityPool=void 0;a.EntityPool=class EntityPool{constructor(e){this.bitPool=new Uint8Array(1024).fill(255),this.firstNonZeroByteIndex=0,e&&(this.bitPool=new Uint8Array(e.bitPool.length).fill(255),this.bitPool.set(e.bitPool),this.firstNonZeroByteIndex=e.firstNonZeroByteIndex)}get capacity(){return 8*this.bitPool.length}alloc(){const e=this.firstNonZeroByteIndex;var a=this.bitPool[e];const i=Math.log2(a&-a);if(a&=~(1<<i),this.bitPool[e]=a,0==a&&(this.firstNonZeroByteIndex++,this.firstNonZeroByteIndex>=this.bitPool.length)){const e=new Uint8Array(2*this.bitPool.length).fill(255);e.set(this.bitPool),this.bitPool=e}return(e<<3)+i}free(e){const a=e>>3,i=7&e;this.bitPool[a]|=1<<i,a<this.firstNonZeroByteIndex&&(this.firstNonZeroByteIndex=a)}}},308:(e,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.LoadAsset=void 0;a.LoadAsset=class LoadAsset{constructor(e){this.url=e,setTimeout((()=>this.load()))}get result(){return this._result}get isFinished(){return void 0!==this._result}finished(e){this.isFinished||(this._result=e)}}},704:(e,a,i)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.LoadBlobAsset=void 0;const n=i(308);class LoadBlobAsset extends n.LoadAsset{load(){const e=this,a=new XMLHttpRequest;a.responseType="blob",a.onload=()=>e.finished(a.response),a.open("GET",e.url+"?cb="+Date.now(),!0),a.send()}}a.LoadBlobAsset=LoadBlobAsset},436:(e,a,i)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.LoadImageAsset=void 0;const n=i(308);class LoadImageAsset extends n.LoadAsset{load(){const e=this,a=new Image;a.onload=()=>e.finished(a),a.crossOrigin="anonymous",a.src=e.url+"?cb="+Date.now()}}a.LoadImageAsset=LoadImageAsset},708:(e,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.countOneBits=a.isPowerOfTwo=a.roundUpToPowerOfTwo=a.toDegrees=a.toRadians=void 0;const i=Math.PI/180;a.toRadians=function(e){return e*i};const n=180/Math.PI;a.toDegrees=function(e){return e*n},a.roundUpToPowerOfTwo=function(e){const a=e<0?-1:1;return e*=a,e-=1,e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,e|=e>>16,e|=e>>32,(e+=1)*a},a.isPowerOfTwo=function(e){return 0==(e&e-1)},a.countOneBits=function(e){return 16843009*((e=(858993459&(e-=e>>1&1431655765))+(e>>2&858993459))+(e>>4)&252645135)>>24}},60:(e,a,i)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.Matrix3=void 0;const n=i(164);a.Matrix3=class Matrix3{static create(){return this.setToIdentity(new Float32Array(9))}static setToIdentity(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}static setTransformRows(e,a,i,n,t){e[0]=n*i.x,e[1]=-t*i.y,e[2]=Math.floor(a.x),e[3]=t*i.x,e[4]=n*i.y,e[5]=Math.floor(a.y)}static multiply(e,a,i){{const n=e[0],t=e[1],o=e[2],r=e[3],s=e[4],l=e[5],b=e[6],d=e[7],c=e[8],h=a[0],u=a[1],y=a[2],v=a[3],M=a[4],m=a[5],g=a[6],p=a[7],f=a[8];i[0]=h*n+u*r+y*b,i[1]=h*t+u*s+y*d,i[2]=h*o+u*l+y*c,i[3]=v*n+M*r+m*b,i[4]=v*t+M*s+m*d,i[5]=v*o+M*l+m*c,i[6]=g*n+p*r+f*b,i[7]=g*t+p*s+f*d,i[8]=g*o+p*l+f*c}return i}static applyToVector2(e,a){return new n.Vector2(a.x*e[0]+a.y*e[1]+e[2],a.x*e[3]+a.y*e[4]+e[5])}}},348:(e,a,i)=>{"use strict";var n;Object.defineProperty(a,"__esModule",{value:!0}),a.StatusSystem=a.Status=void 0;const t=i(700);class Status{constructor(e,a){var i,n;this.clock=e,this.configs={},this.map={},this.configs=a;for(const[e,n]of Object.entries(a))if(n.blocks)for(const a of n.blocks){const n=this.configs[a];n&&(n.blockedBy=null!==(i=n.blockedBy)&&void 0!==i?i:[],n.blockedBy.push(e))}for(const[e,i]of Object.entries(a))if(i.sustains)for(const a of i.sustains){const i=this.configs[a];i&&(i.sustainedBy=null!==(n=i.sustainedBy)&&void 0!==n?n:[],i.sustainedBy.push(e))}for(const[e,i]of Object.entries(a))i.setAtStart&&this.set(e)}get list(){return Object.keys(this.map)}is(e){return void 0!==this.map[e]}isStarting(e){return this.map[e]===this.clock.frame}stop(e){if(void 0===this.map[e])return;const a=this.configs[e];if(null==a?void 0:a.sustainedBy)for(const e of a.sustainedBy)if(this.is(e))return;delete this.map[e],(null==a?void 0:a.then)&&a.then.forEach((e=>this.set(e)))}set(e,a=!0){if(!a)return void this.stop(e);if(void 0!==this.map[e])return;const i=this.configs[e];if(null==i?void 0:i.blockedBy)for(const e of i.blockedBy)if(this.is(e))return;this.map[e]=this.clock.frame,(null==i?void 0:i.sets)&&i.sets.forEach((e=>this.set(e))),(null==i?void 0:i.stops)&&i.stops.forEach((e=>this.stop(e)))}setMany(e){for(const[a,i]of Object.entries(e))this.set(a,i)}each(e){for(const[a,i]of Object.entries(this.map)){const n=this.configs[a];n&&e(a,n,i)}}noticeTime(){for(const[e,a]of Object.entries(this.map)){const i=this.configs[e];(null==i?void 0:i.maxFrames)&&(null==i?void 0:i.maxFrames)<this.clock.frame-a&&this.stop(e)}}}a.Status=Status,n=Status,Status.componentId=(0,t.registerComponent)(n);a.StatusSystem=e=>e.systemFor([Status],{runEach(e,a){a.noticeTime()}})},592:(e,a,i)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.System=void 0;const n=i(152);a.System=class System{constructor(e){this.componentTypes=e,this._requiredBits=new n.BitMask,this._entities=new Map}setEntityComponents(e,a){const i=this._entities.size;this._entities.set(e,a),i!==this._entities.size?this.runEachAdded(e,...a):this.runEachModified(e,...a),this.runEachSet(e,...a)}removeEntityIfPresent(e){const a=this._entities.size;this._entities.delete(e),a!==this._entities.size&&this.runEachRemoved(e)}run(e){for(const[a,i]of e.entries())this.runEach(a,...i)}runEach(e,...a){}runEachAdded(e,...a){}runEachModified(e,...a){}runEachSet(e,...a){}runEachRemoved(e){}}},972:(e,a,i)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.Uint32Array2D=void 0;const n=i(164);class Uint32Array2D{get width(){return this.size.x}get height(){return this.size.y}constructor(e,a=new n.Vector2(0,0)){this.size=e,this.offset=a,this.buffer=new ArrayBuffer(this.width*this.height*4),this.rawBytes=new Uint8Array(this.buffer),this.rawUint32s=new Uint32Array(this.buffer)}static fromArrayLiterals(e,a=new n.Vector2(0,0)){var i,t;const o=new n.Vector2(null!==(t=null===(i=e[0])||void 0===i?void 0:i.length)&&void 0!==t?t:0,e.length),r=new Uint32Array2D(o,a);return r.rawUint32s.set(e.flat()),r}get(e,a){var i;return e-=this.offset.x,a-=this.offset.y,e<0||a<0||e>=this.width||a>=this.height?0:null!==(i=this.rawUint32s[e+a*this.width])&&void 0!==i?i:0}set(e,a,i){if(e-=this.offset.x,a-=this.offset.y,e<0||a<0||e>=this.width||a>=this.height)throw new Error(`set element out of bounds: (${e}, ${a}) within ${this.size.x} x ${this.size.y} size with offset (${this.offset.x}, ${this.offset.y})`);this.rawUint32s[e+a*this.width]=i}forEach(e){for(var a=0;a<this.rawUint32s.length;a++){const i=a%this.width,n=Math.floor(a/this.width);e(this.rawUint32s[a],i+this.offset.x,n+this.offset.y)}}cloneWithoutOffset(){const e=new Uint32Array2D(this.size.plus(this.offset));return e.rawUint32s.fill(0),this.forEach(((a,i,n)=>{e.rawUint32s[i+n*e.width]=a})),e}}a.Uint32Array2D=Uint32Array2D},164:(e,a,i)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.MutableVector2=a.Vector2=void 0;const n=i(708);class BaseVector2{constructor(e=0,a=0){this.x=e,this.y=a}isEqualTo(e){return this.x===e.x&&this.y===e.y}clone(){return new Vector2(this.x,this.y)}cloneMutable(){return new MutableVector2(this.x,this.y)}magnitude(){return Math.sqrt(this.magnitudeSquared())}magnitudeSquared(){return this.x*this.x+this.y*this.y}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}plus(e){return new Vector2(this.x+e.x,this.y+e.y)}minus(e){return new Vector2(this.x-e.x,this.y-e.y)}scale(e){return new Vector2(this.x*e,this.y*e)}}class Vector2 extends BaseVector2{__preventTypeConfusion(){return"immutable"}}a.Vector2=Vector2;class MutableVector2 extends BaseVector2{constructor(e=0,a=0){super(e,a),this.x=e,this.y=a}__preventTypeConfusion(){return"mutable"}setTo(e,a){return this.x=e,this.y=a,this}copyFrom(e){return this.x=e.x,this.y=e.y,this}setUnitRotationRadians(e){return this.x=Math.cos(e),this.y=Math.sin(e),this}setUnitRotationDegrees(e){return this.setUnitRotationRadians((0,n.toRadians)(e)),this}toFloor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}toRoundedCapturingResiduals(e){const{x:a,y:i}=this;return this.x=Math.round(a),this.y=Math.round(i),e.x=a-this.x,e.y=i-this.y,this}plusEquals(e){return this.x+=e.x,this.y+=e.y,this}plusScalarEquals(e){return this.x+=e,this.y+=e,this}minusEquals(e){return this.x-=e.x,this.y-=e.y,this}minusScalarEquals(e){return this.x-=e,this.y-=e,this}multiplyEquals(e){return this.x*=e.x,this.y*=e.y,this}scaleEquals(e){return this.x*=e,this.y*=e,this}inverseScaleEquals(e){return this.x/=e,this.y/=e,this}plusScaledEquals(e,a){return this.x+=e.x*a,this.y+=e.y*a,this}}a.MutableVector2=MutableVector2},596:(e,a,i)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.World=void 0;const n=i(700),t=i(592),o=i(968),r=i(152),s=Array;a.World=class World{constructor(){this.storage=[],this.entityBitMasks=[],this.entityPool=(0,n.newEntityPoolWithStaticComponentsReserved)(),this.systems=[],this.clock=new o.Clock((()=>this.run()))}startRunning(){this.clock.startRunning()}systemFor(e,a){return Object.assign(new t.System(e),a)}create(e){const a=this.entityPool.alloc();return e&&this.set(a,e),a}debugInfoFor(e){const a={};return this.storage.forEach(((i,t)=>{var o,r;const s=null==i?void 0:i[e];if(!s)return;const l=null!==(r=null===(o=(0,n.getComponentClassById)(t))||void 0===o?void 0:o.name)&&void 0!==r?r:`${t}`;a[l]=s})),a}destroy(e){var a;this.systems.forEach((a=>a.removeEntityIfPresent(e))),null===(a=this.entityBitMasks[e])||void 0===a||a.clear(),this.storage.forEach((a=>a?a[e]=void 0:void 0)),this.entityPool.free(e)}get(e,a){var i;return null===(i=this.storage[a.componentId])||void 0===i?void 0:i[e]}set(e,a){var i,n,t,o;const l=null!==(i=(t=this.entityBitMasks)[e])&&void 0!==i?i:t[e]=new r.BitMask(62);for(const i of a){const{componentId:a}=i.constructor;l.set(a,!0);(null!==(n=(o=this.storage)[a])&&void 0!==n?n:o[a]=new s)[e]=i}this.updateSystemsForEntity(e,l)}remove(e,a){const i=this.entityBitMasks[e];if(i){for(const n of a){const{componentId:a}=n;i.set(a,!1);const t=this.storage[a];t&&(t[e]=void 0)}this.updateSystemsForEntity(e,i)}}addSystem(e){this.systems.push(e),e.componentTypes.forEach((({componentId:a})=>{e._requiredBits.set(a,!0)})),this.entityBitMasks.forEach(((a,i)=>{this.updateSystemForEntity(e,i,a)}))}addSystems(e=[]){for(const a of e)this.addSystem(a)}run(){for(const e of this.systems)e.run(e._entities)}updateSystemsForEntity(e,a){for(const i of this.systems)this.updateSystemForEntity(i,e,a)}updateSystemForEntity(e,a,i){i.isSuperSetOf(e._requiredBits)?e.setEntityComponents(a,e.componentTypes.map((e=>this.get(a,e)))):e.removeEntityIfPresent(a)}}},636:function(e,a,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,a,i,n){void 0===n&&(n=i);var t=Object.getOwnPropertyDescriptor(a,i);t&&!("get"in t?!a.__esModule:t.writable||t.configurable)||(t={enumerable:!0,get:function(){return a[i]}}),Object.defineProperty(e,n,t)}:function(e,a,i,n){void 0===n&&(n=i),e[n]=a[i]}),t=this&&this.__exportStar||function(e,a){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(a,i)||n(a,e,i)};Object.defineProperty(a,"__esModule",{value:!0}),t(i(792),a),t(i(152),a),t(i(816),a),t(i(200),a),t(i(840),a),t(i(968),a),t(i(700),a),t(i(912),a),t(i(308),a),t(i(704),a),t(i(436),a),t(i(708),a),t(i(60),a),t(i(348),a),t(i(592),a),t(i(972),a),t(i(164),a),t(i(596),a)},224:(e,a,i)=>{"use strict";var n;Object.defineProperty(a,"__esModule",{value:!0}),a.ArrangementPlaySystem=a.ArrangementPlay=void 0;const t=i(84),o=i(636),r=i(480),s=i(120);class ArrangementPlay{constructor(e){this.config=e,this.startTimestamp=0,this.voices={},this.pendingNotes={},this.scheduledSections=0,this.scheduleFinishTime=0}setupVoicesIfNeeded(e){var a,i,n,o;for(const[r,s]of Object.entries(this.config.voices))null!==(a=(n=this.voices)[r])&&void 0!==a||(n[r]=new t.Voice(e,s)),null!==(i=(o=this.pendingNotes)[r])&&void 0!==i||(o[r]=[])}scheduleSectionsIfNeeded(e){var a;if(e<=this.scheduleFinishTime)return;const{pre:i,loop:n}=this.config,t=null!==(a=null==i?void 0:i.length)&&void 0!==a?a:0;if(i&&this.scheduledSections<t)this.scheduleSection(i[this.scheduledSections],this.scheduleFinishTime),this.scheduledSections++;else if(n){let e=this.scheduledSections-t;for(;e>=n.length;)e-=n.length;this.scheduleSection(n[e],this.scheduleFinishTime),this.scheduledSections++}}scheduleSection(e,a=0){const i=this.config.sections[e];if(!i)throw new Error(`No section named ${e}`);let n=0;for(const[e,t]of Object.entries(i)){if(!this.voices[e])throw new Error(`No voice named ${e}`);let i=a;for(const a of t)(0,s.riffSeqToVoiceNotes)(a).forEach((([a,n])=>{this.pendingNotes[e].push([a+i,n])})),i+=(0,s.riffDuration)(a);i>n&&(n=i)}this.scheduleFinishTime=n}continuePlaying(e,a){const i=a.timestamp/1e3;0===this.startTimestamp&&(this.startTimestamp=i,this.scheduleFinishTime=this.startTimestamp);const n=i+2/a.currentFramesPerSecond;this.scheduleSectionsIfNeeded(n);for(const[e,a]of Object.entries(this.voices)){const i=this.pendingNotes[e];for(;i.length>0;){const[e,t]=i[0];if(e>n)break;i.shift(),a.scheduleNote(e,t)}}}}a.ArrangementPlay=ArrangementPlay,n=ArrangementPlay,ArrangementPlay.componentId=(0,o.registerComponent)(n);a.ArrangementPlaySystem=e=>e.systemFor([r.Context,ArrangementPlay],{runEach(a,i,n){i.audio.resume(),n.continuePlaying(i,e.clock)},runEachSet(e,a,i){i.setupVoicesIfNeeded(a)}})},408:function(e,a,i){"use strict";var n=this&&this.__awaiter||function(e,a,i,n){return new(i||(i=Promise))((function(t,o){function r(e){try{l(n.next(e))}catch(e){o(e)}}function s(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var a;e.done?t(e.value):(a=e.value,a instanceof i?a:new i((function(e){e(a)}))).then(r,s)}l((n=n.apply(e,a||[])).next())}))};Object.defineProperty(a,"__esModule",{value:!0}),a.makeAudioWorkletNodeFactory=a.AudioWorkletProcessor=void 0;const t=i(480);class AudioWorkletProcessor{static get parameterDescriptors(){return[]}}a.AudioWorkletProcessor=AudioWorkletProcessor,AudioWorkletProcessor.workletOptions={},a.makeAudioWorkletNodeFactory=function(e){const a=`data:text/javascript,${encodeURIComponent(e.toString())}; registerProcessor('${e.name}', ${e.name})`;let i=new WeakMap;return t.Context.setupFns.push((e=>n(this,void 0,void 0,(function*(){let n=i.get(e);n||(n=e.audio.audioWorklet.addModule(a),i.set(e,n)),yield n})))),a=>new AudioWorkletNode(a,e.name,e.workletOptions)}},480:function(e,a,i){"use strict";var n,t=this&&this.__awaiter||function(e,a,i,n){return new(i||(i=Promise))((function(t,o){function r(e){try{l(n.next(e))}catch(e){o(e)}}function s(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var a;e.done?t(e.value):(a=e.value,a instanceof i?a:new i((function(e){e(a)}))).then(r,s)}l((n=n.apply(e,a||[])).next())}))};Object.defineProperty(a,"__esModule",{value:!0}),a.Context=void 0;const o=i(636);class Context{static setup(){return t(this,void 0,void 0,(function*(){const e=new n;return yield Promise.all(n.setupFns.map((a=>a(e)))),e}))}constructor(){this.audio=new AudioContext({sampleRate:44100,latencyHint:"interactive"})}}a.Context=Context,n=Context,Context.componentId=(0,o.registerComponent)(n),Context.setupFns=[]},896:(e,a,i)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.Key=a.KeyTuning=void 0;const n=i(636);class KeyTuning{constructor(e,a=e,i=[],n=440){if(this.stepsPerOctave=e,this.stepsPerScaleOctave=a,this.perStepCentAdjustments=i,this.frequencyA4=n,this.stepsPerOctave<=0)throw new Error("KeyTuning stepsPerOctave must be positive");if(!Number.isInteger(this.stepsPerOctave))throw new Error("KeyTuning stepsPerOctave must be an integer");if(this.stepsPerScaleOctave<=0)throw new Error("KeyTuning stepsPerScaleOctave must be positive");if(!Number.isInteger(this.stepsPerScaleOctave))throw new Error("KeyTuning stepsPerScaleOctave must be an integer");if(this.perStepCentAdjustments.length>this.stepsPerScaleOctave)throw new Error("KeyTuning perStepCentAdjustments must not exceed stepsPerScaleOctave");if(this.frequencyA4<=0)throw new Error("KeyTuning frequencyA4 must be positive")}static edo(e){return new KeyTuning(e)}frequencyOf(e){return this.frequencyOfStepsFromA4(this.noteStepsFromA4(e))}frequencyOfStepsFromA4(e){return KeyTuning.baseFrequencyA4*Math.pow(2,e/this.stepsPerOctave)}frequencyApproximateStepsFromA4(e){const a=this.stepsPerOctave*Math.log2(e/KeyTuning.baseFrequencyA4),i=Math.floor(a),n=Math.ceil(a),t=this.frequencyOfStepsFromA4(i),o=this.frequencyOfStepsFromA4(n);return Math.abs(e-t)<Math.abs(e-o)?i:n}noteStepsFromA4(e){const a=e.match(/^([v^]*)([A-G])([^\d]*)(\d+)$/);if(!a)throw new Error(`invalid note: ${e}`);const i=a[1],n=a[2],t=a[3],o=Number.parseInt(a[4]);return this.noteStepsFromA4Inner(i,n,t,o)}noteStepsFromA4Inner(e,a,i,n){const{minorityCount:t,minorityInterval:o,majorityInterval:r,accidentalInterval:s}=KeyTuning.planLetterIntervals(this.stepsPerOctave);let l={A:0};l.B=r,l.G=-r,l.F=l.G-r,l.E=l.F-(t>=2?o:r),l.D=l.E-r,l.C=l.D-r;const b={"":0,b:-s,"#":s,bb:-2*s,"##":2*s};return l[a]+b[i]+{"":0,"^":1,v:-1,"^^":2,vv:-2,"^^^":3,vvv:-3,"^^^^":4,vvvv:-4}[e]+(n-4)*this.stepsPerOctave}static planLetterIntervals(e){const a=this.planLetterIntervalsInner(e);if(!Number.isInteger(a.minorityInterval))throw new Error("planLetterIntervals failed to find an integer minorityInterval");if(!Number.isInteger(a.majorityInterval))throw new Error("planLetterIntervals failed to find an integer majorityInterval");const i=Math.round(KeyTuning.perfectFifthStepsFrac*e-.03),n=Math.pow(2,7*i/e)/16,t=Math.log(n)/Math.log(2),o=Math.round(t*e);return Object.assign(Object.assign({},a),{accidentalInterval:o})}static planLetterIntervalsInner(e){if(12!==e&&e<=13)throw new Error(`KeyTuning planLetterIntervals not yet implemented for ${e}`);const a=[2,1];for(const i of a){let a=Math.floor(e/12),n=a,t=a,o=7-i;for(;a>=0&&a<e;){const r=e-i*a;if(r%o==0){const e=r/o;return e===a?{minorityCount:0,minorityInterval:0,majorityCount:7,majorityInterval:e}:{minorityCount:i,minorityInterval:a,majorityCount:o,majorityInterval:e}}const s=n+1,l=t-1;if(s<e/4&&(l<0||s/e-1/12<1/12-l/e))a=s,n=s;else{if(!(l>=0))break;a=l,t=l}}}throw new Error(`planLetterIntervals not yet implemented for ${e} steps`)}}a.KeyTuning=KeyTuning,KeyTuning.baseFrequencyA4=440,KeyTuning.perfectFifthStepsFrac=Math.log(1.5)/Math.log(2);class Key{constructor(e,a,i){var n;this.tuning=e,this.modeBits=i,this.root=(n=a).match(/(\d+)$/)?n:`${n}4`,this.rootFrequency=e.frequencyOf(this.root)}static fromBits(e,a=KeyTuning.edo(12)){return new Key(a,"C4",e)}static of(e){return{major:l.Ionian.transposeTo(e),minor:l.Aeolian.transposeTo(e),mode:a=>l[a].transposeTo(e),melakarta:a=>{var i;return null===(i=b[a-1])||void 0===i?void 0:i.transposeTo(e)}}}get ringScaleNumber(){return this.modeBits.toNumber()}get noteCount(){return this.modeBits.countOneBits()}get rootOctave(){return Number.parseInt(this.root.match(/\d+$/)[0])}transposeTo(e){return new Key(this.tuning,e,this.modeBits)}transferToTuning(e){const a=this.transposeTo("A4"),i=Array.from({length:this.noteCount}).map(((i,n)=>e.frequencyApproximateStepsFromA4(a.getDegreeFrequency(n+1)))),t=i.map((e=>e-i[0]));let o=new n.BitMask(e.stepsPerScaleOctave);for(const e of t)o.set(e,!0);return new Key(e,this.root,o)}relativeMode(e){return new Key(this.tuning,this.root,this.modeBits.rotatedRight(this.getDegreeDistance(e),0,this.tuning.stepsPerScaleOctave))}getDegreeFrequency(e,a=this.rootOctave){let i=this.getDegreeDistance(e);if(!Number.isInteger(a))throw new Error("octave must be an integer");let n=a-this.rootOctave;for(;n<0;)i-=this.tuning.stepsPerScaleOctave,n+=1;for(;n>0;)i+=this.tuning.stepsPerScaleOctave,n-=1;if(this.tuning.perStepCentAdjustments.length>0)throw new Error("KeyTuning perStepCentAdjustments not implemented yet");return this.rootFrequency*Math.pow(2,i/this.tuning.stepsPerOctave)}getDegreeDistance(e){let a=0;for(;e<1;)e+=this.noteCount,a-=this.tuning.stepsPerScaleOctave;if(Number.isInteger(e))return a+=this.getPositiveIntegerDegreeDistance(e),a;const i=Math.ceil(e),n=Math.floor(e),t=this.getDegreeDistance(i),o=this.getDegreeDistance(n),r=t-o;return a+=o+Math.round((e-n)*r),a}getPositiveIntegerDegreeDistance(e){if(e<1)throw new Error("integer scale degree must be positive");let a=0,i=0;for(;;){for(const[n,t]of this.modeBits.bits())if(n&&(i++,i>=e))return t+a;if(0===i)return 0;a+=this.tuning.stepsPerScaleOctave}}getTertianQuality(e){var a;const i=e+2,n=i+2,t=this.getDegreeDistance(e),o=this.getDegreeDistance(i),r=o-t,s=this.getDegreeDistance(n)-o;if(12!==this.tuning.stepsPerOctave)throw new Error("this method currently only works in 12edo");return null===(a=Key.tertianQualityMatrix12edo.at(r-2))||void 0===a?void 0:a.at(s-2)}static expoundTertianQuality12edo(e){for(const[a,i]of Key.tertianQualityMatrix12edo.entries())for(const[n,t]of i.entries())if(t===e)return[a+2,a+2+n+2];throw new Error(`unknown tertian quality: ${e}`)}get onyxName(){var e,a,i;return`${Key.onyxNameScheme[null!==(e=this.getTertianQuality(1))&&void 0!==e?e:"?"][0]}${Key.onyxNameScheme[null!==(a=this.getTertianQuality(4))&&void 0!==a?a:"?"][1]}${Key.onyxNameScheme[null!==(i=this.getTertianQuality(5))&&void 0!==i?i:"?"][2]}`}static fromOnyxName(e,a){var i,t,o;const r=a.match(Key.onyxNamePattern);if(!r)throw new Error(`invalid onyx name: ${a}`);const s=null===(i=Object.entries(Key.onyxNameScheme).find((([e,a])=>r[1]===a[0])))||void 0===i?void 0:i.at(0),l=null===(t=Object.entries(Key.onyxNameScheme).find((([e,a])=>r[2]===a[1])))||void 0===t?void 0:t.at(0),b=null===(o=Object.entries(Key.onyxNameScheme).find((([e,a])=>r[3]===a[2])))||void 0===o?void 0:o.at(0);if(!s||!l||!b)throw new Error(`invalid onyx name: ${a} (${s}, ${l}, ${b})`);const[d,c]=Key.expoundTertianQuality12edo(s),[h,u]=Key.expoundTertianQuality12edo(l),[y,v]=Key.expoundTertianQuality12edo(b),M=d,m=c,g=m+y,p=m+v-12,f=12-u,A=f+h,L=new n.BitMask;return L.set(0,!0),L.set(p,!0),L.set(M,!0),L.set(f,!0),L.set(m,!0),L.set(A,!0),L.set(g,!0),Key.fromBits(L).transposeTo(e)}hasSvara(e){if(12!==this.tuning.stepsPerOctave)throw new Error("this method currently only works in 12edo");switch(e){case"sa":return 0===this.getDegreeDistance(1);case"ra":return 1===this.getDegreeDistance(2);case"ri":return 2===this.getDegreeDistance(2);case"ru":return 3===this.getDegreeDistance(2);case"ga":return 2===this.getDegreeDistance(3);case"gi":return 3===this.getDegreeDistance(3);case"gu":return 4===this.getDegreeDistance(3);case"ma":return 5===this.getDegreeDistance(4);case"mi":return 6===this.getDegreeDistance(4);case"pa":return 7===this.getDegreeDistance(5);case"dha":return 8===this.getDegreeDistance(6);case"dhi":return 9===this.getDegreeDistance(6);case"dhu":return 10===this.getDegreeDistance(6);case"na":return 9===this.getDegreeDistance(7);case"ni":return 10===this.getDegreeDistance(7);case"nu":return 11===this.getDegreeDistance(7)}}}a.Key=Key,Key.tertianQualityMatrix12edo=[[void 0,void 0,"sus2-dim","sus2","sus2-aug"],[void 0,"dim","min","min-#5"],["maj-b5","maj","aug"],["sus4","sus4-aug"]],Key.onyxNamePattern=/^([A-Z][aeiouy]+)([^aeiouy]+)([a-z]+)$/,Key.onyxNameScheme={maj:["Ma","m","am"],min:["Ni","n","in"],aug:["Ga","g","ug"],dim:["Di","d","id"],"maj-b5":["Da","dm","ad"],"min-#5":["Gi","gn","ig"],sus2:["Too","t","oot"],"sus2-aug":["Goo","gt","oog"],"sus2-dim":["Doo","dt","ood"],sus4:["Foh","f","ohf"],"sus4-aug":["Goh","gf","ohg"],"?":["?x","?","x?"]};function t(...e){if(12!==e.reduce(((e,a)=>e+a),0))throw new Error("sum of semitone counts must be 12 when in 12edo");const a=new n.BitMask(12);let i=0;for(const n of e)a.set(i,!0),i+=n;return Key.fromBits(a)}const o={Major:t(2,2,1,2,2,2,1),"Jazz Minor":t(2,1,2,2,2,2,1),"Harmonic Major":t(2,2,1,2,1,3,1),"Harmonic Minor":t(2,1,2,2,1,3,1),"Double Harmonic Major":t(1,3,1,2,1,3,1),"Neapolitan Minor":t(1,2,2,2,1,3,1),"Neapolitan Major":t(1,2,2,2,2,2,1),"Hungarian Major":t(3,1,2,1,2,1,2),"Romanian Major":t(1,3,2,1,2,1,2),"Harmonic Lydian":t(2,2,2,1,1,3,1),"Mixolydian #2":t(3,1,1,2,2,1,2),"Lydian b2":t(1,3,2,1,2,2,1),"Lydian b2 b6":t(1,3,2,1,1,3,1),"Ionian #2 #6":t(3,1,1,2,3,1,1),"Lydian b2 b3":t(1,2,3,1,2,2,1),"Phrygian #3 #4":t(1,3,2,1,1,2,2),"Phrygian b3 #4":t(1,1,4,1,1,2,2),"Lydian #2 b6 b7":t(3,1,2,1,1,2,2),"Ionian b2 b3 b4":t(1,2,1,3,2,2,1),"Ionian #2 b6":t(3,1,1,2,1,3,1),"Lydian #2 b6":t(3,1,2,1,1,3,1),"Ionian #6 b3":t(2,1,2,2,3,1,1),"Dorian b2 b3":t(1,1,3,2,2,1,2),"Lydian b7 b2 #3":t(1,4,1,1,2,1,2),"Lydian b7 b2 bb3":t(1,1,4,1,2,1,2),"Ionian #2 b6 bb7":t(3,1,1,2,1,1,3),"Ionian b2 #6":t(1,3,1,2,3,1,1),"Aeolian #4 b7":t(2,1,3,1,1,1,3),"Phrygian b7 b3 #4":t(1,1,4,1,1,1,3),"Phrygian b3 #4 #7":t(1,1,4,1,1,3,1),"Lydian b2 b3 #6":t(1,2,3,1,3,1,1),"Phrygian #3 #4 b7":t(1,3,2,1,1,1,3),"Ionian b2 b3 #6":t(1,2,2,2,3,1,1),"Ionian b2 bb3":t(1,1,3,2,2,2,1),"Ionian ##5 #6":t(2,2,1,4,1,1,1),"Ionian b2 bb3 #4":t(1,1,4,1,2,2,1),"Ionian b2 b3 b4 #6":t(1,2,1,3,3,1,1),"Ionian #2 #4 b6 bb7":t(3,1,2,1,1,1,3),"Ionian b2 bb3 #6":t(1,1,3,2,3,1,1),"Phrygian ##3 #4 b7":t(1,4,1,1,1,1,3),"Ionian b2 bb3 #4 #6":t(1,1,4,1,3,1,1)},r=Object.assign(Object.assign({},o),{Ionian:o.Major.relativeMode(1),Dorian:o.Major.relativeMode(2),Phrygian:o.Major.relativeMode(3),Lydian:o.Major.relativeMode(4),Mixolydian:o.Major.relativeMode(5),Aeolian:o.Major.relativeMode(6),Locrian:o.Major.relativeMode(7),"Dorian #7":o["Jazz Minor"].relativeMode(1),"Phrygian #6":o["Jazz Minor"].relativeMode(2),"Lydian #5":o["Jazz Minor"].relativeMode(3),"Mixolydian #4":o["Jazz Minor"].relativeMode(4),"Aeolian #3":o["Jazz Minor"].relativeMode(5),"Locrian #2":o["Jazz Minor"].relativeMode(6),"Ionian #1":o["Jazz Minor"].relativeMode(7),"Ionian b6":o["Harmonic Major"].relativeMode(1),"Dorian b5":o["Harmonic Major"].relativeMode(2),"Phrygian b4":o["Harmonic Major"].relativeMode(3),"Lydian b3":o["Harmonic Major"].relativeMode(4),"Mixolydian b2":o["Harmonic Major"].relativeMode(5),"Aeolian b1":o["Harmonic Major"].relativeMode(6),"Locrian b7":o["Harmonic Major"].relativeMode(7),"Aeolian #7":o["Harmonic Minor"].relativeMode(1),"Locrian #6":o["Harmonic Minor"].relativeMode(2),"Ionian #5":o["Harmonic Minor"].relativeMode(3),"Dorian #4":o["Harmonic Minor"].relativeMode(4),"Phrygian #3":o["Harmonic Minor"].relativeMode(5),"Lydian #2":o["Harmonic Minor"].relativeMode(6),"Mixolydian #1":o["Harmonic Minor"].relativeMode(7),"Phrygian #3 #7":o["Double Harmonic Major"].relativeMode(1),"Lydian #2 #6":o["Double Harmonic Major"].relativeMode(2),"Mixolydian #1 #5":o["Double Harmonic Major"].relativeMode(3),"Aeolian #7 #4":o["Double Harmonic Major"].relativeMode(4),"Locrian #6 #3":o["Double Harmonic Major"].relativeMode(5),"Ionian #5 #2":o["Double Harmonic Major"].relativeMode(6),"Dorian #4 #1":o["Double Harmonic Major"].relativeMode(7),"Phrygian #7":o["Neapolitan Minor"].relativeMode(1),"Lydian #6":o["Neapolitan Minor"].relativeMode(2),"Mixolydian #5":o["Neapolitan Minor"].relativeMode(3),"Aeolian #4":o["Neapolitan Minor"].relativeMode(4),"Locrian #3":o["Neapolitan Minor"].relativeMode(5),"Ionian #2":o["Neapolitan Minor"].relativeMode(6),"Dorian #1":o["Neapolitan Minor"].relativeMode(7),"Dorian #7 b2":o["Neapolitan Major"].relativeMode(1),"Phrygian #6 b1":o["Neapolitan Major"].relativeMode(2),"Lydian #5 b7":o["Neapolitan Major"].relativeMode(3),"Mixolydian #4 b6":o["Neapolitan Major"].relativeMode(4),"Aeolian #3 b5":o["Neapolitan Major"].relativeMode(5),"Locrian #2 b4":o["Neapolitan Major"].relativeMode(6),"Ionian #1 b3":o["Neapolitan Major"].relativeMode(7),"Mixolydian #4 #2":o["Hungarian Major"].relativeMode(1),"Aeolian #3 #1":o["Hungarian Major"].relativeMode(2),"Locrian #2 #7":o["Hungarian Major"].relativeMode(3),"Ionian #1 #6":o["Hungarian Major"].relativeMode(4),"Dorian #7 #5":o["Hungarian Major"].relativeMode(5),"Phrygian #6 #4":o["Hungarian Major"].relativeMode(6),"Lydian #5 #3":o["Hungarian Major"].relativeMode(7),"Lydian b7 b2":o["Romanian Major"].relativeMode(1),"Mixolydian b6 b1":o["Romanian Major"].relativeMode(2),"Aeolian b5 b7":o["Romanian Major"].relativeMode(3),"Locrian b4 b6":o["Romanian Major"].relativeMode(4),"Ionian b3 b5":o["Romanian Major"].relativeMode(5),"Dorian b2 b4":o["Romanian Major"].relativeMode(6),"Phrygian b1 b3":o["Romanian Major"].relativeMode(7),"Lydian b6":o["Harmonic Lydian"].relativeMode(1),"Mixolydian b5":o["Harmonic Lydian"].relativeMode(2),"Aeolian b4":o["Harmonic Lydian"].relativeMode(3),"Locrian b3":o["Harmonic Lydian"].relativeMode(4),"Ionian b2":o["Harmonic Lydian"].relativeMode(5),"Dorian b1":o["Harmonic Lydian"].relativeMode(6),"Phrygian b7":o["Harmonic Lydian"].relativeMode(7),"Mixolydian #2":o["Mixolydian #2"].relativeMode(1),"Aeolian #1":o["Mixolydian #2"].relativeMode(2),"Locrian #7":o["Mixolydian #2"].relativeMode(3),"Ionian #6":o["Mixolydian #2"].relativeMode(4),"Dorian #5":o["Mixolydian #2"].relativeMode(5),"Phrygian #4":o["Mixolydian #2"].relativeMode(6),"Lydian #3":o["Mixolydian #2"].relativeMode(7),"Lydian b2":o["Lydian b2"].relativeMode(1),"Mixolydian b1":o["Lydian b2"].relativeMode(2),"Aeolian b7":o["Lydian b2"].relativeMode(3),"Locrian b6":o["Lydian b2"].relativeMode(4),"Ionian b5":o["Lydian b2"].relativeMode(5),"Dorian b4":o["Lydian b2"].relativeMode(6),"Phrygian b3":o["Lydian b2"].relativeMode(7),"Lydian b2 b6":o["Lydian b2 b6"].relativeMode(1),"Mixolydian b1 b5":o["Lydian b2 b6"].relativeMode(2),"Aeolian b7 b4":o["Lydian b2 b6"].relativeMode(3),"Locrian b6 b3":o["Lydian b2 b6"].relativeMode(4),"Ionian b5 b2":o["Lydian b2 b6"].relativeMode(5),"Dorian b4 b1":o["Lydian b2 b6"].relativeMode(6),"Phrygian b3 b7":o["Lydian b2 b6"].relativeMode(7),"Ionian #2 #6":o["Ionian #2 #6"].relativeMode(1),"Dorian #1 #5":o["Ionian #2 #6"].relativeMode(2),"Phrygian #7 #4":o["Ionian #2 #6"].relativeMode(3),"Lydian #6 #3":o["Ionian #2 #6"].relativeMode(4),"Mixolydian #5 #2":o["Ionian #2 #6"].relativeMode(5),"Aeolian #4 #1":o["Ionian #2 #6"].relativeMode(6),"Locrian #3 #7":o["Ionian #2 #6"].relativeMode(7),"Lydian b2 b3":o["Lydian b2 b3"].relativeMode(1),"Mixolydian b1 b2":o["Lydian b2 b3"].relativeMode(2),"Aeolian b7 b1":o["Lydian b2 b3"].relativeMode(3),"Locrian b6 b7":o["Lydian b2 b3"].relativeMode(4),"Ionian b5 b6":o["Lydian b2 b3"].relativeMode(5),"Dorian b4 b5":o["Lydian b2 b3"].relativeMode(6),"Phrygian b3 b4":o["Lydian b2 b3"].relativeMode(7),"Phrygian #3 #4":o["Phrygian #3 #4"].relativeMode(1),"Lydian #2 #3":o["Phrygian #3 #4"].relativeMode(2),"Mixolydian #1 #2":o["Phrygian #3 #4"].relativeMode(3),"Aeolian #7 #1":o["Phrygian #3 #4"].relativeMode(4),"Locrian #6 #7":o["Phrygian #3 #4"].relativeMode(5),"Ionian #5 #6":o["Phrygian #3 #4"].relativeMode(6),"Dorian #4 #5":o["Phrygian #3 #4"].relativeMode(7),"Phrygian b3 #4":o["Phrygian b3 #4"].relativeMode(1),"Lydian b2 #3":o["Phrygian b3 #4"].relativeMode(2),"Mixolydian b1 #2":o["Phrygian b3 #4"].relativeMode(3),"Aeolian b7 #1":o["Phrygian b3 #4"].relativeMode(4),"Locrian b6 #7":o["Phrygian b3 #4"].relativeMode(5),"Ionian b5 #6":o["Phrygian b3 #4"].relativeMode(6),"Dorian b4 #5":o["Phrygian b3 #4"].relativeMode(7),"Lydian #2 b6 b7":o["Lydian #2 b6 b7"].relativeMode(1),"Mixolydian #1 b5 b6":o["Lydian #2 b6 b7"].relativeMode(2),"Aeolian #7 b4 b5":o["Lydian #2 b6 b7"].relativeMode(3),"Locrian #6 b3 b4":o["Lydian #2 b6 b7"].relativeMode(4),"Ionian #5 b2 b3":o["Lydian #2 b6 b7"].relativeMode(5),"Dorian #4 b1 b2":o["Lydian #2 b6 b7"].relativeMode(6),"Phrygian #3 b7 b1":o["Lydian #2 b6 b7"].relativeMode(7),"Ionian b2 b3 b4":o["Ionian b2 b3 b4"].relativeMode(1),"Dorian b1 b2 b3":o["Ionian b2 b3 b4"].relativeMode(2),"Phrygian b7 b1 b2":o["Ionian b2 b3 b4"].relativeMode(3),"Lydian b6 b7 b1":o["Ionian b2 b3 b4"].relativeMode(4),"Mixolydian b5 b6 b7":o["Ionian b2 b3 b4"].relativeMode(5),"Aeolian b4 b5 b6":o["Ionian b2 b3 b4"].relativeMode(6),"Locrian b3 b4 b5":o["Ionian b2 b3 b4"].relativeMode(7),"Ionian #2 b6":o["Ionian #2 b6"].relativeMode(1),"Dorian #1 b5":o["Ionian #2 b6"].relativeMode(2),"Phrygian #7 b4":o["Ionian #2 b6"].relativeMode(3),"Lydian #6 b3":o["Ionian #2 b6"].relativeMode(4),"Mixolydian #5 b2":o["Ionian #2 b6"].relativeMode(5),"Aeolian #4 b1":o["Ionian #2 b6"].relativeMode(6),"Locrian #3 b7":o["Ionian #2 b6"].relativeMode(7),"Lydian #2 b6":o["Lydian #2 b6"].relativeMode(1),"Mixolydian #1 b5":o["Lydian #2 b6"].relativeMode(2),"Aeolian #7 b4":o["Lydian #2 b6"].relativeMode(3),"Locrian #6 b3":o["Lydian #2 b6"].relativeMode(4),"Ionian #5 b2":o["Lydian #2 b6"].relativeMode(5),"Dorian #4 b1":o["Lydian #2 b6"].relativeMode(6),"Phrygian #3 b7":o["Lydian #2 b6"].relativeMode(7),"Ionian #6 b3":o["Ionian #6 b3"].relativeMode(1),"Dorian #5 b2":o["Ionian #6 b3"].relativeMode(2),"Phrygian #4 b1":o["Ionian #6 b3"].relativeMode(3),"Lydian #3 b7":o["Ionian #6 b3"].relativeMode(4),"Mixolydian #2 b6":o["Ionian #6 b3"].relativeMode(5),"Aeolian #1 b5":o["Ionian #6 b3"].relativeMode(6),"Locrian #7 b4":o["Ionian #6 b3"].relativeMode(7),"Dorian b2 b3":o["Dorian b2 b3"].relativeMode(1),"Phrygian b1 b2":o["Dorian b2 b3"].relativeMode(2),"Lydian b7 b1":o["Dorian b2 b3"].relativeMode(3),"Mixolydian b6 b7":o["Dorian b2 b3"].relativeMode(4),"Aeolian b5 b6":o["Dorian b2 b3"].relativeMode(5),"Locrian b4 b5":o["Dorian b2 b3"].relativeMode(6),"Ionian b3 b4":o["Dorian b2 b3"].relativeMode(7),"Lydian b7 b2 #3":o["Lydian b7 b2 #3"].relativeMode(1),"Mixolydian b6 b1 #2":o["Lydian b7 b2 #3"].relativeMode(2),"Aeolian b5 b7 #1":o["Lydian b7 b2 #3"].relativeMode(3),"Locrian b4 b6 #7":o["Lydian b7 b2 #3"].relativeMode(4),"Ionian b3 b5 #6":o["Lydian b7 b2 #3"].relativeMode(5),"Dorian b2 b4 #5":o["Lydian b7 b2 #3"].relativeMode(6),"Phrygian b1 b3 #4":o["Lydian b7 b2 #3"].relativeMode(7),"Lydian b7 b2 bb3":o["Lydian b7 b2 bb3"].relativeMode(1),"Mixolydian b6 b1 bb2":o["Lydian b7 b2 bb3"].relativeMode(2),"Aeolian b5 b7 bb1":o["Lydian b7 b2 bb3"].relativeMode(3),"Locrian b4 b6 bb7":o["Lydian b7 b2 bb3"].relativeMode(4),"Ionian b3 b5 bb6":o["Lydian b7 b2 bb3"].relativeMode(5),"Dorian b2 b4 bb5":o["Lydian b7 b2 bb3"].relativeMode(6),"Phrygian b1 b3 bb4":o["Lydian b7 b2 bb3"].relativeMode(7),"Ionian #2 b6 bb7":o["Ionian #2 b6 bb7"].relativeMode(1),"Dorian #1 b5 bb6":o["Ionian #2 b6 bb7"].relativeMode(2),"Phrygian #7 b4 bb5":o["Ionian #2 b6 bb7"].relativeMode(3),"Lydian #6 b3 bb4":o["Ionian #2 b6 bb7"].relativeMode(4),"Mixolydian #5 b2 bb3":o["Ionian #2 b6 bb7"].relativeMode(5),"Aeolian #4 b1 bb2":o["Ionian #2 b6 bb7"].relativeMode(6),"Locrian #3 b7 bb1":o["Ionian #2 b6 bb7"].relativeMode(7),"Ionian b2 #6":o["Ionian b2 #6"].relativeMode(1),"Dorian b1 #5":o["Ionian b2 #6"].relativeMode(2),"Phrygian b7 #4":o["Ionian b2 #6"].relativeMode(3),"Lydian b6 #3":o["Ionian b2 #6"].relativeMode(4),"Mixolydian b5 #2":o["Ionian b2 #6"].relativeMode(5),"Aeolian b4 #1":o["Ionian b2 #6"].relativeMode(6),"Locrian b3 #7":o["Ionian b2 #6"].relativeMode(7),"Aeolian #4 b7":o["Aeolian #4 b7"].relativeMode(1),"Locrian #3 b6":o["Aeolian #4 b7"].relativeMode(2),"Ionian #2 b5":o["Aeolian #4 b7"].relativeMode(3),"Dorian #1 b4":o["Aeolian #4 b7"].relativeMode(4),"Phrygian #7 b3":o["Aeolian #4 b7"].relativeMode(5),"Lydian #6 b2":o["Aeolian #4 b7"].relativeMode(6),"Mixolydian #5 b1":o["Aeolian #4 b7"].relativeMode(7),"Phrygian b7 b3 #4":o["Phrygian b7 b3 #4"].relativeMode(1),"Lydian b6 b2 #3":o["Phrygian b7 b3 #4"].relativeMode(2),"Mixolydian b5 b1 #2":o["Phrygian b7 b3 #4"].relativeMode(3),"Aeolian b4 b7 #1":o["Phrygian b7 b3 #4"].relativeMode(4),"Locrian b3 b6 #7":o["Phrygian b7 b3 #4"].relativeMode(5),"Ionian b2 b5 #6":o["Phrygian b7 b3 #4"].relativeMode(6),"Dorian b1 b4 #5":o["Phrygian b7 b3 #4"].relativeMode(7),"Phrygian b3 #4 #7":o["Phrygian b3 #4 #7"].relativeMode(1),"Lydian b2 #3 #6":o["Phrygian b3 #4 #7"].relativeMode(2),"Mixolydian b1 #2 #5":o["Phrygian b3 #4 #7"].relativeMode(3),"Aeolian b7 #1 #4":o["Phrygian b3 #4 #7"].relativeMode(4),"Locrian b6 #7 #3":o["Phrygian b3 #4 #7"].relativeMode(5),"Ionian b5 #6 #2":o["Phrygian b3 #4 #7"].relativeMode(6),"Dorian b4 #5 #1":o["Phrygian b3 #4 #7"].relativeMode(7),"Lydian b2 b3 #6":o["Lydian b2 b3 #6"].relativeMode(1),"Mixolydian b1 b2 #5":o["Lydian b2 b3 #6"].relativeMode(2),"Aeolian b7 b1 #4":o["Lydian b2 b3 #6"].relativeMode(3),"Locrian b6 b7 #3":o["Lydian b2 b3 #6"].relativeMode(4),"Ionian b5 b6 #2":o["Lydian b2 b3 #6"].relativeMode(5),"Dorian b4 b5 #1":o["Lydian b2 b3 #6"].relativeMode(6),"Phrygian b3 b4 #7":o["Lydian b2 b3 #6"].relativeMode(7),"Phrygian #3 #4 b7":o["Phrygian #3 #4 b7"].relativeMode(1),"Lydian #2 #3 b6":o["Phrygian #3 #4 b7"].relativeMode(2),"Mixolydian #1 #2 b5":o["Phrygian #3 #4 b7"].relativeMode(3),"Aeolian #7 #1 b4":o["Phrygian #3 #4 b7"].relativeMode(4),"Locrian #6 #7 b3":o["Phrygian #3 #4 b7"].relativeMode(5),"Ionian #5 #6 b2":o["Phrygian #3 #4 b7"].relativeMode(6),"Dorian #4 #5 b1":o["Phrygian #3 #4 b7"].relativeMode(7),"Ionian b2 b3 #6":o["Ionian b2 b3 #6"].relativeMode(1),"Dorian b1 b2 #5":o["Ionian b2 b3 #6"].relativeMode(2),"Phrygian b7 b1 #4":o["Ionian b2 b3 #6"].relativeMode(3),"Lydian b6 b7 #3":o["Ionian b2 b3 #6"].relativeMode(4),"Mixolydian b5 b6 #2":o["Ionian b2 b3 #6"].relativeMode(5),"Aeolian b4 b5 #1":o["Ionian b2 b3 #6"].relativeMode(6),"Locrian b3 b4 #7":o["Ionian b2 b3 #6"].relativeMode(7),"Ionian b2 bb3":o["Ionian b2 bb3"].relativeMode(1),"Dorian b1 bb2":o["Ionian b2 bb3"].relativeMode(2),"Phrygian b7 bb1":o["Ionian b2 bb3"].relativeMode(3),"Lydian b6 bb7":o["Ionian b2 bb3"].relativeMode(4),"Mixolydian b5 bb6":o["Ionian b2 bb3"].relativeMode(5),"Aeolian b4 bb5":o["Ionian b2 bb3"].relativeMode(6),"Locrian b3 bb4":o["Ionian b2 bb3"].relativeMode(7),"Ionian ##5 #6":o["Ionian ##5 #6"].relativeMode(1),"Dorian ##4 #5":o["Ionian ##5 #6"].relativeMode(2),"Phrygian ##3 #4":o["Ionian ##5 #6"].relativeMode(3),"Lydian ##2 #3":o["Ionian ##5 #6"].relativeMode(4),"Mixolydian ##1 #2":o["Ionian ##5 #6"].relativeMode(5),"Aeolian ##7 #1":o["Ionian ##5 #6"].relativeMode(6),"Locrian ##6 #7":o["Ionian ##5 #6"].relativeMode(7),"Ionian b2 bb3 #4":o["Ionian b2 bb3 #4"].relativeMode(1),"Dorian b1 bb2 #3":o["Ionian b2 bb3 #4"].relativeMode(2),"Phrygian b7 bb1 #2":o["Ionian b2 bb3 #4"].relativeMode(3),"Lydian b6 bb7 #1":o["Ionian b2 bb3 #4"].relativeMode(4),"Mixolydian b5 bb6 #7":o["Ionian b2 bb3 #4"].relativeMode(5),"Aeolian b4 bb5 #6":o["Ionian b2 bb3 #4"].relativeMode(6),"Locrian b3 bb4 #5":o["Ionian b2 bb3 #4"].relativeMode(7),"Ionian b2 b3 b4 #6":o["Ionian b2 b3 b4 #6"].relativeMode(1),"Dorian b1 b2 b3 #5":o["Ionian b2 b3 b4 #6"].relativeMode(2),"Phrygian b7 b1 b2 #4":o["Ionian b2 b3 b4 #6"].relativeMode(3),"Lydian b6 b7 b1 #3":o["Ionian b2 b3 b4 #6"].relativeMode(4),"Mixolydian b5 b6 b7 #2":o["Ionian b2 b3 b4 #6"].relativeMode(5),"Aeolian b4 b5 b6 #1":o["Ionian b2 b3 b4 #6"].relativeMode(6),"Locrian b3 b4 b5 #7":o["Ionian b2 b3 b4 #6"].relativeMode(7),"Ionian #2 #4 b6 bb7":o["Ionian #2 #4 b6 bb7"].relativeMode(1),"Dorian #1 #3 b5 bb6":o["Ionian #2 #4 b6 bb7"].relativeMode(2),"Phrygian #7 #2 b4 bb5":o["Ionian #2 #4 b6 bb7"].relativeMode(3),"Lydian #6 #1 b3 bb4":o["Ionian #2 #4 b6 bb7"].relativeMode(4),"Mixolydian #5 #7 b2 bb3":o["Ionian #2 #4 b6 bb7"].relativeMode(5),"Aeolian #4 #6 b1 bb2":o["Ionian #2 #4 b6 bb7"].relativeMode(6),"Locrian #3 #5 b7 bb1":o["Ionian #2 #4 b6 bb7"].relativeMode(7),"Ionian b2 bb3 #6":o["Ionian b2 bb3 #6"].relativeMode(1),"Dorian b1 bb2 #5":o["Ionian b2 bb3 #6"].relativeMode(2),"Phrygian b7 bb1 #4":o["Ionian b2 bb3 #6"].relativeMode(3),"Lydian b6 bb7 #3":o["Ionian b2 bb3 #6"].relativeMode(4),"Mixolydian b5 bb6 #2":o["Ionian b2 bb3 #6"].relativeMode(5),"Aeolian b4 bb5 #1":o["Ionian b2 bb3 #6"].relativeMode(6),"Locrian b3 bb4 #7":o["Ionian b2 bb3 #6"].relativeMode(7),"Phrygian ##3 #4 b7":o["Phrygian ##3 #4 b7"].relativeMode(1),"Lydian ##2 #3 b6":o["Phrygian ##3 #4 b7"].relativeMode(2),"Mixolydian ##1 #2 b5":o["Phrygian ##3 #4 b7"].relativeMode(3),"Aeolian ##7 #1 b4":o["Phrygian ##3 #4 b7"].relativeMode(4),"Locrian ##6 #7 b3":o["Phrygian ##3 #4 b7"].relativeMode(5),"Ionian ##5 #6 b2":o["Phrygian ##3 #4 b7"].relativeMode(6),"Dorian ##4 #5 b1":o["Phrygian ##3 #4 b7"].relativeMode(7),"Ionian b2 bb3 #4 #6":o["Ionian b2 bb3 #4 #6"].relativeMode(1),"Dorian b1 bb2 #3 #5":o["Ionian b2 bb3 #4 #6"].relativeMode(2),"Phrygian b7 bb1 #2 #4":o["Ionian b2 bb3 #4 #6"].relativeMode(3),"Lydian b6 bb7 #1 #3":o["Ionian b2 bb3 #4 #6"].relativeMode(4),"Mixolydian b5 bb6 #7 #2":o["Ionian b2 bb3 #4 #6"].relativeMode(5),"Aeolian b4 bb5 #6 #1":o["Ionian b2 bb3 #4 #6"].relativeMode(6),"Locrian b3 bb4 #5 #7":o["Ionian b2 bb3 #4 #6"].relativeMode(7)}),s=Object.assign(Object.assign({},r),{Minor:r.Aeolian,"Chinese Zè":r.Ionian,"Thaat Bilawal":r.Ionian,"Thang Phiang Aw Bon":r.Ionian,"Mela Dheerasankarabharanam (29)":r.Ionian,"Japanese Banshikicho":r.Dorian,"Thaat Kafi":r.Dorian,"Thang Nawk":r.Dorian,"Mela Kharaharapriya (22)":r.Dorian,"Major Inverse":r.Phrygian,"Japanese Zokuso":r.Phrygian,"Thaat Bhairavi":r.Phrygian,"Thang Klang Haep":r.Phrygian,"Mela Hanumatodi (8)":r.Phrygian,"Japanese Kung":r.Lydian,"Thaat Kalyan":r.Lydian,"Thang Chawa":r.Lydian,"Mela Mechakalyani (65)":r.Lydian,"Chinese Ching":r.Mixolydian,"Mugham Rast":r.Mixolydian,"Thang Phiang Aw Lang":r.Mixolydian,"Thaat Khamaj":r.Mixolydian,"Mela Harikambhoji (28)":r.Mixolydian,"Thaat Asavari":r.Aeolian,"Thang Nai":r.Aeolian,"Mugham Shur":r.Aeolian,"Ethiopian Geez":r.Aeolian,"Mela Natabhairavi (20)":r.Aeolian,"Thang Luk":r.Locrian,"Jewish Yishtabach":r.Locrian,"Ionian b3":r["Dorian #7"],"Dorian b2":r["Phrygian #6"],"Phrygian b1":r["Lydian #5"],"Lydian b7":r["Mixolydian #4"],"Mixolydian b6":r["Aeolian #3"],"Aeolian b5":r["Locrian #2"],"Locrian b4":r["Ionian #1"],Bocrian:r["Dorian #7"],Mixolythian:r["Phrygian #6"],Larian:r["Lydian #5"],Lythian:r["Mixolydian #4"],Stydian:r["Aeolian #3"],Lorian:r["Locrian #2"],Ionadian:r["Ionian #1"],"Melodic Minor":r["Dorian #7"],"Minor-Major":r["Dorian #7"],"Mela Gourimanohari (23)":r["Dorian #7"],"Jazz Minor Inverse":r["Phrygian #6"],"Phrygian-Mixolydian":r["Phrygian #6"],"Javanese Pelog":r["Phrygian #6"],"Mela Natakapriya (10)":r["Phrygian #6"],"Lydian Augmented":r["Lydian #5"],Acoustic:r["Mixolydian #4"],Overtone:r["Mixolydian #4"],"Overtone Dominant":r["Mixolydian #4"],"Lydian Dominant":r["Mixolydian #4"],"Lydian-Mixolydian":r["Mixolydian #4"],"Mela Vachaspati (64)":r["Mixolydian #4"],Bartók:r["Mixolydian #4"],"Major-Minor":r["Aeolian #3"],"Aeolian Dominant":r["Aeolian #3"],"Altered Mixolydian":r["Aeolian #3"],"Mugham Bayati Shiraz":r["Aeolian #3"],"Mela Charukesi (26)":r["Aeolian #3"],"Minor Locrian":r["Locrian #2"],"Half Diminished":r["Locrian #2"],"Super-Locrian":r["Ionian #1"],"Diminished Whole-Tone":r["Ionian #1"],Altered:r["Ionian #1"],"Altered Dominant":r["Ionian #1"],Pomeroy:r["Ionian #1"],Ravel:r["Ionian #1"],Aerorian:r["Ionian b6"],Katagian:r["Dorian b5"],Phronian:r["Phrygian b4"],Banian:r["Lydian b3"],Aeronian:r["Mixolydian b2"],Palian:r["Aeolian b1"],Stothian:r["Locrian b7"],"Greek Tabahaniotikos":r["Ionian b6"],"Mugham Shahnaz":r["Ionian b6"],"Mela Sarasangi (27)":r["Ionian b6"],"Locrian #2 #6":r["Dorian b5"],"Blues Heptatonic":r["Dorian b5"],"Greek Kartzigár":r["Dorian b5"],"Melodic Minor #4":r["Lydian b3"],"Lydian Diminished":r["Lydian b3"],"Mela Dharmavati (59)":r["Lydian b3"],"Harmonic Minor Inverse":r["Mixolydian b2"],"Mugham Humayun":r["Mixolydian b2"],"Mela Chakravakam (16)":r["Mixolydian b2"],"Lydian Augmented #2":r["Aeolian b1"],"Diminished Blues b9":r["Locrian b7"],Mydian:r["Aeolian #7"],Thyptian:r["Locrian #6"],Phrothian:r["Ionian #5"],Katycrian:r["Dorian #4"],Ionalian:r["Phrygian #3"],Bycrian:r["Lydian #2"],Pathian:r["Mixolydian #1"],"Harmonic Minor":r["Aeolian #7"],"Thaat Pilu":r["Aeolian #7"],"Mela Keeravani (21)":r["Aeolian #7"],"Major Augmented":r["Ionian #5"],"Ionian Augmented":r["Ionian #5"],"Greek Nikríz":r["Dorian #4"],"Altered Dorian":r["Dorian #4"],"Romanian Minor":r["Dorian #4"],"Jewish Misheberekh":r["Dorian #4"],"Mela Hemavati (58)":r["Dorian #4"],"Phrygian Dominant":r["Phrygian #3"],"Phrygian Major":r["Phrygian #3"],"Harmonic Major Inverse":r["Phrygian #3"],"Greek Hitzaz":r["Phrygian #3"],Vativasantabhairavi:r["Phrygian #3"],"Jewish Freygish":r["Phrygian #3"],"Mela Vakulabharanam (14)":r["Phrygian #3"],"Aeolian Harmonic":r["Lydian #2"],"Mela Kosalam (71)":r["Lydian #2"],"Ultra-Locrian":r["Mixolydian #1"],"Super-Locrian Diminished":r["Mixolydian #1"],"Super-Locrian Double-Flat":r["Mixolydian #1"],"Diminished Locrian":r["Mixolydian #1"],Aerynian:r["Phrygian #3 #7"],Loptian:r["Lydian #2 #6"],Ionodian:r["Mixolydian #1 #5"],Bogian:r["Aeolian #7 #4"],Mogian:r["Locrian #6 #3"],Docrian:r["Ionian #5 #2"],Epadian:r["Dorian #4 #1"],"Greek Hitzazkiar":r["Phrygian #3 #7"],"Thaat Bhairav":r["Phrygian #3 #7"],"Mela Mayamalavagaula (15)":r["Phrygian #3 #7"],"Mela Rasikapriya (72)":r["Lydian #2 #6"],"Ultra-Phrygian":r["Mixolydian #1 #5"],"Double Harmonic Minor":r["Aeolian #7 #4"],"Hungarian Minor":r["Aeolian #7 #4"],"Greek Niavent":r["Aeolian #7 #4"],Hisar:r["Aeolian #7 #4"],"Mela Simhendramadhyamam (57)":r["Aeolian #7 #4"],"Hungarian Minor Inverse":r["Locrian #6 #3"],"Greek Tsinganikos":r["Locrian #6 #3"],"Mugham Caharkah 1":r["Locrian #6 #3"],"Ionian Augmented #2":r["Ionian #5 #2"],"Locrian Double-Flat 3":r["Dorian #4 #1"],"Double-Flat 7":r["Dorian #4 #1"],Aerylian:r["Phrygian #7"],Zagian:r["Lydian #6"],Lagian:r["Mixolydian #5"],Tyrian:r["Aeolian #4"],Mixonorian:r["Locrian #3"],Dolian:r["Ionian #2"],Porian:r["Dorian #1"],"Mela Dhenuka (9)":r["Phrygian #7"],"Mela Chitrambari (66)":r["Lydian #6"],"Mixolydian Augmented":r["Mixolydian #5"],"Mela Shanmukhapriya (56)":r["Aeolian #4"],"Locrian Dominant":r["Locrian #3"],"Mela Sulini (35)":r["Ionian #2"],Thydian:r["Dorian #7 b2"],Aeolynian:r["Phrygian #6 b1"],Aeroptian:r["Lydian #5 b7"],Phryrian:r["Mixolydian #4 b6"],Gothian:r["Aeolian #3 b5"],Storian:r["Locrian #2 b4"],Pyptian:r["Ionian #1 b3"],"Lydian Major":r["Dorian #7 b2"],"Mela Kokilapriya (11)":r["Dorian #7 b2"],"Leading Whole-Tone":r["Phrygian #6 b1"],"Lydian Minor":r["Mixolydian #4 b6"],"Mela Rishabhapriya (62)":r["Mixolydian #4 b6"],"Locrian Major":r["Aeolian #3 b5"],"Leading Whole-Tone Inverse":r["Ionian #1 b3"],Mycrian:r["Mixolydian #4 #2"],Ionorian:r["Aeolian #3 #1"],Phrydian:r["Locrian #2 #7"],Zyptian:r["Ionian #1 #6"],Katothian:r["Dorian #7 #5"],Phrylian:r["Phrygian #6 #4"],Kocrian:r["Lydian #5 #3"],"Mela Nasikabhushani (70)":r["Mixolydian #4 #2"],"Alternating Heptamode":r["Aeolian #3 #1"],"Harmonic Minor b5":r["Locrian #2 #7"],"Mela Shadvidamargini (46)":r["Phrygian #6 #4"],"Japanese Nokhan Flute Scale":r["Lydian #5 #3"],Epalian:r["Lydian b7 b2"],Pogian:r["Mixolydian b6 b1"],Aeraptian:r["Aeolian b5 b7"],Epylian:r["Locrian b4 b6"],Gamian:r["Ionian b3 b5"],Kathian:r["Dorian b2 b4"],Lylian:r["Phrygian b1 b3"],Petrushka:r["Lydian b7 b2"],"Mela Ramapriya (52)":r["Lydian b7 b2"],"Moravian Pistalkova":r["Aeolian b5 b7"],"Hungarian Major Inverse":r["Aeolian b5 b7"],"Jeth's Mode":r["Ionian b3 b5"],Ryphian:r["Lydian b6"],Gylian:r["Mixolydian b5"],Aeloycrian:r["Aeolian b4"],Pynian:r["Locrian b3"],Zanian:r["Ionian b2"],Golian:r["Dorian b1"],Dyptian:r["Phrygian b7"],"Mela Latangi (63)":r["Lydian b6"],"Greek Sabach":r["Aeolian b4"],"Mugham Caharkah 2":r["Ionian b2"],"Thaat Bhairubahar":r["Ionian b2"],"Mela Suryakantam (17)":r["Ionian b2"],"Major-Melodic Phrygian":r["Ionian b2"],"Mela Senavati (7)":r["Phrygian b7"],Ionycrian:r["Mixolydian #2"],Phradian:r["Aeolian #1"],Aeolorian:r["Locrian #7"],Gonian:r["Ionian #6"],Dalian:r["Dorian #5"],Dygian:r["Phrygian #4"],Zolian:r["Lydian #3"],"Mela Vagadheeswari (34)":r["Mixolydian #2"],"Mela Naganandini (30)":r["Ionian #6"],"Mela Bhavapriya (44)":r["Phrygian #4"],Garian:r["Lydian b2"],Thonian:r["Mixolydian b1"],Phrorian:r["Aeolian b7"],Stadian:r["Locrian b6"],Thodian:r["Ionian b5"],Dogian:r["Dorian b4"],Mixopyrian:r["Phrygian b3"],"Thaat Marva":r["Lydian b2"],"Greek Houzám Minór":r["Lydian b2"],"Mela Gamanashrama (53)":r["Lydian b2"],"Mela Jhankaradhvani (19)":r["Aeolian b7"],"Mela Ratnangi (2)":r["Phrygian b3"],Stylian:r["Lydian b2 b6"],Epathian:r["Mixolydian b1 b5"],Mythian:r["Aeolian b7 b4"],Sogian:r["Locrian b6 b3"],Gogian:r["Ionian b5 b2"],Rothian:r["Dorian b4 b1"],Katarian:r["Phrygian b3 b7"],"Chromatic Hypolydian":r["Lydian b2 b6"],"Greek Pireotikos":r["Lydian b2 b6"],"Thaat Purvi":r["Lydian b2 b6"],"Mela Kamavardhani (51)":r["Lydian b2 b6"],"Chromatic Hypophrygian":r["Mixolydian b1 b5"],"Blues Scale III":r["Mixolydian b1 b5"],"Chromatic Hypodorian":r["Aeolian b7 b4"],"Relative Blues Scale":r["Aeolian b7 b4"],"Chromatic Mixolydian":r["Locrian b6 b3"],"Chromatic Lydian":r["Ionian b5 b2"],"Chromatic Phrygian":r["Dorian b4 b1"],"Chromatic Dorian":r["Phrygian b3 b7"],"Mela Kanakangi (1)":r["Phrygian b3 b7"],Ionacrian:r["Ionian #2 #6"],Gathian:r["Dorian #1 #5"],Ionyphian:r["Phrygian #7 #4"],Phrynian:r["Lydian #6 #3"],Epogian:r["Mixolydian #5 #2"],Lanian:r["Aeolian #4 #1"],Paptian:r["Locrian #3 #7"],"Chromatic Dorian Inverse":r["Ionian #2 #6"],"Japanese Youlan":r["Ionian #2 #6"],"Mela Chalanata (36)":r["Ionian #2 #6"],"Chromatic Phrygian Inverse":r["Dorian #1 #5"],"Chromatic Lydian Inverse":r["Phrygian #7 #4"],"Harsh Minor":r["Phrygian #7 #4"],"Thaat Todi":r["Phrygian #7 #4"],"Mela Shubhapantuvarali (45)":r["Phrygian #7 #4"],"Chromatic Mixolydian Inverse":r["Lydian #6 #3"],"Chromatic Hypodorian Inverse":r["Mixolydian #5 #2"],"Chromatic Hypophrygian Inverse":r["Aeolian #4 #1"],"Chromatic Hypolydian Inverse":r["Locrian #3 #7"],Manian:r["Lydian b2 b3"],Marian:r["Mixolydian b1 b2"],Korian:r["Aeolian b7 b1"],Lynian:r["Locrian b6 b7"],Malian:r["Ionian b5 b6"],Synian:r["Dorian b4 b5"],Phragian:r["Phrygian b3 b4"],"Mela Suvarnangi (47)":r["Lydian b2 b3"],Rynian:r["Phrygian #3 #4"],Eporian:r["Lydian #2 #3"],Rylian:r["Mixolydian #1 #2"],Epaptian:r["Aeolian #7 #1"],Byrian:r["Locrian #6 #7"],Katanian:r["Ionian #5 #6"],Katyrian:r["Dorian #4 #5"],"Harsh Major-Minor":r["Phrygian #3 #4"],"Mela Namanarayani (50)":r["Phrygian #3 #4"],Aeolagian:r["Phrygian b3 #4"],Zyrian:r["Lydian b2 #3"],Thacrian:r["Mixolydian b1 #2"],Dodian:r["Aeolian b7 #1"],Aeolyptian:r["Locrian b6 #7"],Aeolonian:r["Ionian b5 #6"],Aeradian:r["Dorian b4 #5"],"Mela Jalarnavam (38)":r["Phrygian b3 #4"],Ionanian:r["Lydian #2 b6 b7"],Aerothian:r["Mixolydian #1 b5 b6"],Stagian:r["Aeolian #7 b4 b5"],Lothian:r["Locrian #6 b3 b4"],Phrycrian:r["Ionian #5 b2 b3"],Kyptian:r["Dorian #4 b1 b2"],Ionylian:r["Phrygian #3 b7 b1"],"Mela Jyoti Swarupini (68)":r["Lydian #2 b6 b7"],Kynian:r["Ionian b2 b3 b4"],Stynian:r["Dorian b1 b2 b3"],Epyphian:r["Phrygian b7 b1 b2"],Epacrian:r["Lydian b6 b7 b1"],Sathian:r["Mixolydian b5 b6 b7"],Lathian:r["Aeolian b4 b5 b6"],Aeralian:r["Locrian b3 b4 b5"],"Persichetti Scale":r["Phrygian b7 b1 b2"],"Elephant Scale":r["Locrian b3 b4 b5"],Syrian:r["Ionian #2 b6"],Stodian:r["Dorian #1 b5"],Ionocrian:r["Phrygian #7 b4"],Zycrian:r["Lydian #6 b3"],Ionygian:r["Mixolydian #5 b2"],Tholian:r["Aeolian #4 b1"],Ralian:r["Locrian #3 b7"],"Mela Gangeyabhushani (33)":r["Ionian #2 b6"],"Greek Sengiach":r["Ionian #2 b6"],"Mela Neetimati (60)":r["Lydian #6 b3"],Barian:r["Lydian #2 b6"],Mixolocrian:r["Mixolydian #1 b5"],Sagian:r["Aeolian #7 b4"],Aeolothian:r["Locrian #6 b3"],Socrian:r["Ionian #5 b2"],Katathian:r["Dorian #4 b1"],Modian:r["Phrygian #3 b7"],"Mela Dhatuvardhani (69)":r["Lydian #2 b6"],"Major Romani":r["Ionian #5 b2"],"Heptatonic Romani":r["Phrygian #3 b7"],"Mela Gayakapriya (13)":r["Phrygian #3 b7"],Aeracrian:r["Ionian #6 b3"],Byptian:r["Dorian #5 b2"],Darian:r["Phrygian #4 b1"],Lonian:r["Lydian #3 b7"],Aerathian:r["Mixolydian #2 b6"],Sarian:r["Aeolian #1 b5"],Zoptian:r["Locrian #7 b4"],"Mela Varunapriya (24)":r["Ionian #6 b3"],"Mela Ragavardhini (32)":r["Mixolydian #2 b6"],Zaptian:r["Dorian b2 b3"],Kagian:r["Phrygian b1 b2"],Phrolian:r["Lydian b7 b1"],Ionagian:r["Mixolydian b6 b7"],Aeodian:r["Aeolian b5 b6"],Kycrian:r["Locrian b4 b5"],Epygian:r["Ionian b3 b4"],"Mela Vanaspati (4)":r["Dorian b2 b3"],"Major Bebop Heptatonic":r["Mixolydian b6 b7"],"Mela Mararanjani (25)":r["Mixolydian b6 b7"],"Modified Blues":r["Aeolian b5 b6"],Katalian:r["Lydian b7 b2 #3"],Aeolathian:r["Mixolydian b6 b1 #2"],Bythian:r["Aeolian b5 b7 #1"],Padian:r["Locrian b4 b6 #7"],Rolian:r["Ionian b3 b5 #6"],Pydian:r["Dorian b2 b4 #5"],Thygian:r["Phrygian b1 b3 #4"],Dagian:r["Lydian b7 b2 bb3"],Aolydian:r["Mixolydian b6 b1 bb2"],Stygian:r["Aeolian b5 b7 bb1"],Aeolygian:r["Locrian b4 b6 bb7"],Aerogian:r["Ionian b3 b5 bb6"],Dacrian:r["Dorian b2 b4 bb5"],Baptian:r["Phrygian b1 b3 bb4"],"Mela Navaneetam (40)":r["Lydian b7 b2 bb3"],Stoptian:r["Ionian #2 b6 bb7"],Zygian:r["Dorian #1 b5 bb6"],Kataptian:r["Phrygian #7 b4 bb5"],Aeolaptian:r["Lydian #6 b3 bb4"],Pothian:r["Mixolydian #5 b2 bb3"],Bygian:r["Aeolian #4 b1 bb2"],Stalian:r["Locrian #3 b7 bb1"],"Mela Yagapriya (31)":r["Ionian #2 b6 bb7"],Zodian:r["Ionian b2 #6"],Ranian:r["Dorian b1 #5"],Ladian:r["Phrygian b7 #4"],Podian:r["Lydian b6 #3"],Ionothian:r["Mixolydian b5 #2"],Kanian:r["Aeolian b4 #1"],Zylian:r["Locrian b3 #7"],"Mela Hatakambari (18)":r["Ionian b2 #6"],"Mela Gavambhodi (43)":r["Phrygian b7 #4"],Phryptian:r["Aeolian #4 b7"],Katynian:r["Locrian #3 b6"],Aerycrian:r["Ionian #2 b5"],Ganian:r["Dorian #1 b4"],Eparian:r["Phrygian #7 b3"],Lyrian:r["Lydian #6 b2"],Katocrian:r["Mixolydian #5 b1"],"Mela Shamalangi (55)":r["Aeolian #4 b7"],"Mela Ganamurti (3)":r["Phrygian #7 b3"],"Mela Vishwambari (54)":r["Lydian #6 b2"],Aeolanian:r["Phrygian b7 b3 #4"],Danian:r["Lydian b6 b2 #3"],Aeolacrian:r["Mixolydian b5 b1 #2"],Zythian:r["Aeolian b4 b7 #1"],Dyrian:r["Locrian b3 b6 #7"],Koptian:r["Ionian b2 b5 #6"],Thocrian:r["Dorian b1 b4 #5"],"Mela Salagam (37)":r["Phrygian b7 b3 #4"],Stonian:r["Phrygian b3 #4 #7"],Syptian:r["Lydian b2 #3 #6"],Ionarian:r["Mixolydian b1 #2 #5"],Dynian:r["Aeolian b7 #1 #4"],Zydian:r["Locrian b6 #7 #3"],Zathian:r["Ionian b5 #6 #2"],Radian:r["Dorian b4 #5 #1"],"Mela Jhalavarali (39)":r["Phrygian b3 #4 #7"],Katadian:r["Lydian b2 b3 #6"],Kodian:r["Mixolydian b1 b2 #5"],Zarian:r["Aeolian b7 b1 #4"],Phrythian:r["Locrian b6 b7 #3"],Rorian:r["Ionian b5 b6 #2"],Bolian:r["Dorian b4 b5 #1"],Bothian:r["Phrygian b3 b4 #7"],"Mela Divyamani (48)":r["Lydian b2 b3 #6"],Thogian:r["Phrygian #3 #4 b7"],Laptian:r["Lydian #2 #3 b6"],Lygian:r["Mixolydian #1 #2 b5"],Logian:r["Aeolian #7 #1 b4"],Lalian:r["Locrian #6 #7 b3"],Sothian:r["Ionian #5 #6 b2"],Phrocrian:r["Dorian #4 #5 b1"],"Mela Dhavalambari (49)":r["Phrygian #3 #4 b7"],"Foulds' Mantra Of Will Scale":r["Phrygian #3 #4 b7"],"Verdi's Enigmatic Descending":r["Ionian #5 #6 b2"],Staptian:r["Ionian b2 b3 #6"],Mothian:r["Dorian b1 b2 #5"],Aeranian:r["Phrygian b7 b1 #4"],Ragian:r["Lydian b6 b7 #3"],Pagian:r["Mixolydian b5 b6 #2"],Aeolythian:r["Aeolian b4 b5 #1"],Molian:r["Locrian b3 b4 #7"],"Mela Rupavati (12)":r["Ionian b2 b3 #6"],Pylian:r["Ionian b2 bb3"],Ionathian:r["Dorian b1 bb2"],Phraptian:r["Phrygian b7 bb1"],Bacrian:r["Lydian b6 bb7"],Katythian:r["Mixolydian b5 bb6"],Madian:r["Aeolian b4 bb5"],Aerygian:r["Locrian b3 bb4"],"Mela Manavati (5)":r["Ionian b2 bb3"],"Verdi's Enigmatic Ascending":r["Dorian b1 bb2"],"Mela Kantamani (61)":r["Lydian b6 bb7"],Kygian:r["Ionian ##5 #6"],Mocrian:r["Dorian ##4 #5"],Zynian:r["Phrygian ##3 #4"],Zogian:r["Lydian ##2 #3"],Epyrian:r["Mixolydian ##1 #2"],Lycrian:r["Aeolian ##7 #1"],Daptian:r["Locrian ##6 #7"],Aeraphian:r["Ionian b2 bb3 #4"],Zacrian:r["Dorian b1 bb2 #3"],Ionythian:r["Phrygian b7 bb1 #2"],Aeolyrian:r["Lydian b6 bb7 #1"],Gorian:r["Mixolydian b5 bb6 #7"],Aeolodian:r["Aeolian b4 bb5 #6"],Doptian:r["Locrian b3 bb4 #5"],"Mela Pavani (41)":r["Ionian b2 bb3 #4"],Aeolocrian:r["Ionian b2 b3 b4 #6"],Mixodorian:r["Dorian b1 b2 b3 #5"],Dathian:r["Phrygian b7 b1 b2 #4"],Gacrian:r["Lydian b6 b7 b1 #3"],Borian:r["Mixolydian b5 b6 b7 #2"],Sycrian:r["Aeolian b4 b5 b6 #1"],Gadian:r["Locrian b3 b4 b5 #7"],Raptian:r["Ionian #2 #4 b6 bb7"],Epolian:r["Dorian #1 #3 b5 bb6"],Sythian:r["Phrygian #7 #2 b4 bb5"],Sydian:r["Lydian #6 #1 b3 bb4"],Epocrian:r["Mixolydian #5 #7 b2 bb3"],Kylian:r["Aeolian #4 #6 b1 bb2"],Epagian:r["Locrian #3 #5 b7 bb1"],"Mela Sucharitra (67)":r["Ionian #2 #4 b6 bb7"],Epythian:r["Ionian b2 bb3 #6"],Kaptian:r["Dorian b1 bb2 #5"],Morian:r["Phrygian b7 bb1 #2"],Rycrian:r["Lydian b6 bb7 #3"],Ronian:r["Mixolydian b5 bb6 #2"],Stycrian:r["Aeolian b4 bb5 #1"],Katorian:r["Locrian b3 bb4 #7"],"Mela Tanarupi (6)":r["Ionian b2 bb3 #6"],"Heptatonic Blues":r["Mixolydian b5 bb6 #2"],Phrathian:r["Phrygian ##3 #4 b7"],Thycrian:r["Lydian ##2 #3 b6"],Aeoladian:r["Mixolydian ##1 #2 b5"],Dylian:r["Aeolian ##7 #1 b4"],Eponian:r["Locrian ##6 #7 b3"],Katygian:r["Ionian ##5 #6 b2"],Starian:r["Dorian ##4 #5 b1"],Kolian:r["Ionian b2 bb3 #4 #6"],Dycrian:r["Dorian b1 bb2 #3 #5"],Parian:r["Phrygian b7 bb1 #2 #4"],Ionaptian:r["Lydian b6 bb7 #1 #3"],Thylian:r["Mixolydian b5 bb6 #7 #2"],Lolian:r["Aeolian b4 bb5 #6 #1"],Thagian:r["Locrian b3 bb4 #5 #7"],"Mela Raghupriya (42)":r["Ionian b2 bb3 #4 #6"]}),l=Object.assign(Object.assign({},r),s),b=[s["Mela Kanakangi (1)"],s["Mela Ratnangi (2)"],s["Mela Ganamurti (3)"],s["Mela Vanaspati (4)"],s["Mela Manavati (5)"],s["Mela Tanarupi (6)"],s["Mela Senavati (7)"],s["Mela Hanumatodi (8)"],s["Mela Dhenuka (9)"],s["Mela Natakapriya (10)"],s["Mela Kokilapriya (11)"],s["Mela Rupavati (12)"],s["Mela Gayakapriya (13)"],s["Mela Vakulabharanam (14)"],s["Mela Mayamalavagaula (15)"],s["Mela Chakravakam (16)"],s["Mela Suryakantam (17)"],s["Mela Hatakambari (18)"],s["Mela Jhankaradhvani (19)"],s["Mela Natabhairavi (20)"],s["Mela Keeravani (21)"],s["Mela Kharaharapriya (22)"],s["Mela Gourimanohari (23)"],s["Mela Varunapriya (24)"],s["Mela Mararanjani (25)"],s["Mela Charukesi (26)"],s["Mela Sarasangi (27)"],s["Mela Harikambhoji (28)"],s["Mela Dheerasankarabharanam (29)"],s["Mela Naganandini (30)"],s["Mela Yagapriya (31)"],s["Mela Ragavardhini (32)"],s["Mela Gangeyabhushani (33)"],s["Mela Vagadheeswari (34)"],s["Mela Sulini (35)"],s["Mela Chalanata (36)"],s["Mela Salagam (37)"],s["Mela Jalarnavam (38)"],s["Mela Jhalavarali (39)"],s["Mela Navaneetam (40)"],s["Mela Pavani (41)"],s["Mela Raghupriya (42)"],s["Mela Gavambhodi (43)"],s["Mela Bhavapriya (44)"],s["Mela Shubhapantuvarali (45)"],s["Mela Shadvidamargini (46)"],s["Mela Suvarnangi (47)"],s["Mela Divyamani (48)"],s["Mela Dhavalambari (49)"],s["Mela Namanarayani (50)"],s["Mela Kamavardhani (51)"],s["Mela Ramapriya (52)"],s["Mela Gamanashrama (53)"],s["Mela Vishwambari (54)"],s["Mela Shamalangi (55)"],s["Mela Shanmukhapriya (56)"],s["Mela Simhendramadhyamam (57)"],s["Mela Hemavati (58)"],s["Mela Dharmavati (59)"],s["Mela Neetimati (60)"],s["Mela Kantamani (61)"],s["Mela Rishabhapriya (62)"],s["Mela Latangi (63)"],s["Mela Vachaspati (64)"],s["Mela Mechakalyani (65)"],s["Mela Chitrambari (66)"],s["Mela Sucharitra (67)"],s["Mela Jyoti Swarupini (68)"],s["Mela Dhatuvardhani (69)"],s["Mela Nasikabhushani (70)"],s["Mela Kosalam (71)"],s["Mela Rasikapriya (72)"]]},532:(e,a,i)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.NESNoise=a.NESNoiseProcessor=void 0;const n=i(408);class AudioWorkletProcessor extends n.AudioWorkletProcessor{}class NESNoiseProcessor extends AudioWorkletProcessor{constructor(){super(...arguments),this.travel=0,this.shiftRegister=1,this.inverseSampleRate=.00026360638479979066}static get parameterDescriptors(){return[{name:"freq",defaultValue:440,minValue:0,maxValue:2e4,automationRate:"a-rate"},{name:"gain",defaultValue:0,minValue:0,maxValue:1,automationRate:"a-rate"},{name:"timbre",defaultValue:4,minValue:0,maxValue:4,automationRate:"a-rate"}]}process(e,a,i){var n,t,o;const r=a[0][0];for(let e=0;e<r.length;e++){const a=null!==(n=i.freq[e])&&void 0!==n?n:i.freq[0],s=null!==(t=i.gain[e])&&void 0!==t?t:i.gain[0],l=null!==(o=i.timbre[e])&&void 0!==o?o:i.timbre[0],b=Math.floor(l)+1;for(this.travel+=this.inverseSampleRate*a;this.travel>1;){this.travel-=1;const e=(1&this.shiftRegister)>0!==(this.shiftRegister>>b&1)>0;this.shiftRegister=this.shiftRegister>>1|(e?0:1)<<14}const d=2*(1&this.shiftRegister)-1;r[e]=d*s}return!0}}a.NESNoiseProcessor=NESNoiseProcessor,NESNoiseProcessor.nodeOptions={numberOfInputs:0,numberOfOutputs:1,outputChannelCount:[1]},a.NESNoise=(0,n.makeAudioWorkletNodeFactory)(NESNoiseProcessor)},828:function(e,a,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,a,i,n){void 0===n&&(n=i);var t=Object.getOwnPropertyDescriptor(a,i);t&&!("get"in t?!a.__esModule:t.writable||t.configurable)||(t={enumerable:!0,get:function(){return a[i]}}),Object.defineProperty(e,n,t)}:function(e,a,i,n){void 0===n&&(n=i),e[n]=a[i]}),t=this&&this.__exportStar||function(e,a){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(a,i)||n(a,e,i)};Object.defineProperty(a,"__esModule",{value:!0}),t(i(224),a),t(i(408),a),t(i(480),a),t(i(896),a),t(i(120),a),t(i(84),a),t(i(532),a)},504:(e,a,i)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.OscAudioWorkletNodeFactory=a.OscAudioWorkletProcessor=void 0;const n=i(408);class AudioWorkletProcessor extends n.AudioWorkletProcessor{}class OscAudioWorkletProcessor extends AudioWorkletProcessor{constructor(){super(...arguments),this.travel=0,this.priorGain=0,this.priorTimbre=0,this.vibratoTravel=0,this.priorVibratoAmount=0}static get parameterDescriptors(){return[{name:"freq",defaultValue:440,minValue:0,maxValue:2e4,automationRate:"a-rate"},{name:"gain",defaultValue:0,minValue:0,maxValue:1,automationRate:"a-rate"},{name:"timbre",defaultValue:4,minValue:0,maxValue:4,automationRate:"a-rate"},{name:"vibrato",defaultValue:0,minValue:-120,maxValue:120,automationRate:"a-rate"},{name:"vibratoFreq",defaultValue:5,minValue:0,maxValue:200,automationRate:"a-rate"}]}process(e,a,i){var n,t,o,r,s;const l=a[0][0],b=1/44100,d=OscAudioWorkletProcessor;for(let e=0;e<l.length;e++){let a=null!==(n=i.freq[e])&&void 0!==n?n:i.freq[0],c=null!==(t=i.gain[e])&&void 0!==t?t:this.priorGain,h=null!==(o=i.timbre[e])&&void 0!==o?o:this.priorTimbre,u=null!==(r=i.vibrato[e])&&void 0!==r?r:this.priorVibratoAmount;const y=null!==(s=i.vibratoFreq[e])&&void 0!==s?s:i.vibratoFreq[0];if(0===this.priorGain&&(this.travel=1,this.vibratoTravel=1),this.vibratoTravel+=b*y,this.vibratoTravel<=1)u=this.priorVibratoAmount;else for(;this.vibratoTravel>1;)this.vibratoTravel-=1;const{vibratoTravel:v}=this,M=1;if(a*=d.semitonesToRatio(u*d.waveform(v,M)),this.travel+=b*a,this.travel<=1)c=this.priorGain,h=this.priorTimbre;else for(;this.travel>1;)this.travel-=1;const{travel:m}=this;l[e]=d.waveform(m,h)*c,this.priorGain=c,this.priorTimbre=h,this.priorVibratoAmount=u}return!0}static semitonesToRatio(e){return Math.pow(2,e/12)}static waveform(e,a){if(0===a)return Math.sin(2*e*Math.PI);if(1===a)return e<=.25?4*e:e<=.75?2-4*e:4*e-4;if(2===a)return 1-2*e;if(a<1){return(1-a)*Math.sin(2*e*Math.PI)+a*(e<=.25?4*e:e<=.75?2-4*e:4*e-4)}if(a<2){const i=-.25*a+.5,n=1/i;return e<=i?e*n:e<1-i?1-(e-i)*(2/(1-2*i)):(e-1)*n}if(a<3){return(3-a)*(1-2*e)+(a-2)*(e<=.5?1:-1)}if(a<=4){return e<=.5*Math.pow(.25,a-3)?1:-1}return 0}}a.OscAudioWorkletProcessor=OscAudioWorkletProcessor,OscAudioWorkletProcessor.nodeOptions={numberOfInputs:0,numberOfOutputs:1,outputChannelCount:[1]},a.OscAudioWorkletNodeFactory=(0,n.makeAudioWorkletNodeFactory)(OscAudioWorkletProcessor)},120:(e,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.riffSeqToVoiceNotes=a.riffCharCodeToGain=a.riffOctaveAt=a.riffGainAt=a.riffCharCodeToOctave=a.riffCharCodeToScaleNumber=a.riffDuration=a.riffComputeStepSizes=void 0;const i="l".charCodeAt(0),n="o".charCodeAt(0),t="O".charCodeAt(0),o="L".charCodeAt(0),r="0".charCodeAt(0),s=";".charCodeAt(0),l="p".charCodeAt(0),b="P".charCodeAt(0),d=":".charCodeAt(0),c="1".charCodeAt(0),h="z".charCodeAt(0),u="a".charCodeAt(0),y="q".charCodeAt(0),v="Q".charCodeAt(0),M="A".charCodeAt(0),m="Z".charCodeAt(0),g="2".charCodeAt(0),p="x".charCodeAt(0),f="s".charCodeAt(0),A="w".charCodeAt(0),L="W".charCodeAt(0),P="S".charCodeAt(0),I="X".charCodeAt(0),x="3".charCodeAt(0),w="c".charCodeAt(0),D="d".charCodeAt(0),k="e".charCodeAt(0),S="E".charCodeAt(0),C="D".charCodeAt(0),O="C".charCodeAt(0),j="4".charCodeAt(0),T="v".charCodeAt(0),E="f".charCodeAt(0),q="r".charCodeAt(0),B="R".charCodeAt(0),N="F".charCodeAt(0),R="V".charCodeAt(0),K="5".charCodeAt(0),_="b".charCodeAt(0),F="g".charCodeAt(0),V="t".charCodeAt(0),H="T".charCodeAt(0),G="G".charCodeAt(0),U="B".charCodeAt(0),z="6".charCodeAt(0),W="n".charCodeAt(0),$="h".charCodeAt(0),Z="y".charCodeAt(0),J="Y".charCodeAt(0),Q="H".charCodeAt(0),X="N".charCodeAt(0),Y="7".charCodeAt(0),ee="m".charCodeAt(0),ae="j".charCodeAt(0),ie="u".charCodeAt(0),ne="U".charCodeAt(0),te="J".charCodeAt(0),oe="M".charCodeAt(0),re="8".charCodeAt(0),se="k".charCodeAt(0),le="i".charCodeAt(0),be="I".charCodeAt(0),de="K".charCodeAt(0),ce="9".charCodeAt(0),he="-".charCodeAt(0),ue=" ".charCodeAt(0),ye="0".charCodeAt(0),ve="9".charCodeAt(0),Me="@".charCodeAt(0),me=" ".charCodeAt(0),ge="+".charCodeAt(0),pe="-".charCodeAt(0),fe=",".charCodeAt(0),Ae="`".charCodeAt(0),Le="^".charCodeAt(0),Pe="-".charCodeAt(0),Ie=" ".charCodeAt(0),xe="0".charCodeAt(0),we="9".charCodeAt(0),De="@".charCodeAt(0);function ke(e){const a=[],i=e.split(""),n=i.length;i.push("|");for(let e=-1;e<n;){const n=i.indexOf("|",e+1);if(e>=0){const i=n-e;a.push(...Array(i).fill(1/i))}e=n}return a}function Se(e){switch(e){case i:return-.8;case n:return-.6;case t:return-.4;case o:return-.2;case r:return 0;case s:return.2;case l:return.4;case b:return.6;case d:return.8;case c:return 1;case h:return 1.1;case u:return 1.2;case y:return 1.4;case v:return 1.6;case M:return 1.8;case m:return 1.9;case g:return 2;case p:return 2.1;case f:return 2.2;case A:return 2.4;case L:return 2.6;case P:return 2.8;case I:return 2.9;case x:return 3;case w:return 3.1;case D:return 3.2;case k:return 3.4;case S:return 3.6;case C:return 3.8;case O:return 3.9;case j:return 4;case T:return 4.1;case E:return 4.2;case q:return 4.4;case B:return 4.6;case N:return 4.8;case R:return 4.9;case K:return 5;case _:return 5.1;case F:return 5.2;case V:return 5.4;case H:return 5.6;case G:return 5.8;case U:return 5.9;case z:return 6;case W:return 6.1;case $:return 6.2;case Z:return 6.4;case J:return 6.6;case Q:return 6.8;case X:return 6.9;case Y:return 7;case ee:return 7.1;case ae:return 7.2;case ie:return 7.4;case ne:return 7.6;case te:return 7.8;case oe:return 7.9;case re:return 8;case se:return 8.2;case le:return 8.4;case be:return 8.6;case de:return 8.8;case ce:return 9}throw new Error(`Unknown riff scale code: ${e}`)}function Ce(e,a){if(e>=ye&&e<=ve)return e-ye;if(e===Me)return 10;if(e===me)return a;if(e===ge)return a+1;if(e===pe)return a-1;if(isNaN(e))return a;throw new Error(`Unknown riff octave code: ${e}`)}function Oe(e,a){var i;let n=1;if(!e.vol)return n;for(let t=0;t<=a;t++)n=null!==(i=Te(e.vol.charCodeAt(t)))&&void 0!==i?i:n;return n}function je(e,a){let i=4;if(!e.oct)return i;for(let n=0;n<=a;n++)i=Ce(e.oct.charCodeAt(n),i);return i}function Te(e){if(e>=xe&&e<=we)return(e-xe)/10;if(e===De)return 1;if(e!==Ie&&!isNaN(e))throw new Error(`Unknown riff volume code: ${e}`)}function Ee(e,a,i,n){var t;let o=0,r=i;for(;r<a.length&&n(a.charCodeAt(r),r);r++)o+=null!==(t=e[r])&&void 0!==t?t:0;return{duration:o,stepCount:r-i}}function qe(e,a,i,n,t){var o,r;if(!e.gls)return;const s=60/e.bpm,l=Ee(a,e.gls,i,(e=>e===t)),b=Se(e.gls.charCodeAt(i+l.stepCount))*(t===fe?-1:1),d=n.duration-(null!==(o=a[i])&&void 0!==o?o:0)*s,c=d+l.duration*s,h=e.key.getDegreeFrequency(n.scaleNumber+b,je(e,i))-n.freqBase;n.freqSlides=null!==(r=n.freqSlides)&&void 0!==r?r:[],n.freqSlides.push({timeStart:d,timeEnd:c,deltaStart:h,deltaEnd:0})}function Be(e,a,i,n){var t,o,r,s;if(!e.gls)return;const l=60/e.bpm,b=(null!==(t=a[i])&&void 0!==t?t:0)*l,d=Ee(a,e.gls,i,((e,a)=>a===i||e===Pe)),c=d.duration*l,h=d.stepCount,u=function(e,a,i){for(let n=a;n<i;n++){const a=e.seq.charCodeAt(n);if(a!==he&&a!==ue)return{scaleNumber:Se(a),octave:je(e,n)}}}(e,i,i+h);if(!u)return;n.freqSlides=null!==(o=n.freqSlides)&&void 0!==o?o:[];const y=n.duration-b,v=y+c,M=null!==(s=null===(r=n.freqSlides[n.freqSlides.length-1])||void 0===r?void 0:r.deltaEnd)&&void 0!==s?s:0,m=e.key.getDegreeFrequency(u.scaleNumber,u.octave)-n.freqBase;n.freqSlides.push({timeStart:y,timeEnd:v,deltaStart:M,deltaEnd:m})}a.riffComputeStepSizes=ke,a.riffDuration=function(e){var a;const i=60/e.bpm,n=ke(e.div);let t=0;for(let o=0;o<e.seq.length;o++)t+=(null!==(a=n[o])&&void 0!==a?a:0)*i;return t},a.riffCharCodeToScaleNumber=Se,a.riffCharCodeToOctave=Ce,a.riffGainAt=Oe,a.riffOctaveAt=je,a.riffCharCodeToGain=Te,a.riffSeqToVoiceNotes=function(e){var a,i,n,t,o,r;const s=60/e.bpm,l=ke(e.div),b=[];let d,c=0;for(let h=0;h<e.seq.length;h++){const u=(null!==(a=l[h])&&void 0!==a?a:0)*s,y=e.seq.charCodeAt(h),v=null===(i=e.gls)||void 0===i?void 0:i.charCodeAt(h),M=null===(n=e.vol)||void 0===n?void 0:n.charCodeAt(h);if(y===he)d&&(d.duration+=u);else if(y===ue);else if(!d||v!==Le&&v!==Pe){const a=Se(y),i=je(e,h);d={duration:u,freqBase:e.key.getDegreeFrequency(a,i),scaleNumber:a,octave:i},b.push([c,d]);const n=Oe(e,h);1!=n&&void 0===Te(null!=M?M:0)&&(null!==(t=d.gainEvents)&&void 0!==t||(d.gainEvents=[]),d.gainEvents.push({time:0,gain:n}))}else d&&(d.duration+=u);if(d&&v){const a=null===(o=e.gls)||void 0===o?void 0:o.charCodeAt(h-1);v===Le&&a!==Le?Be(e,l,h,d):v===fe&&a!==fe?qe(e,l,h,d,fe):v===Ae&&a!==Ae&&qe(e,l,h,d,Ae)}if(d&&M){const e=Te(M);void 0!==e&&(null!==(r=d.gainEvents)&&void 0!==r||(d.gainEvents=[]),d.gainEvents.push({time:d.duration-u,gain:e}))}c+=u}return b.forEach((([e,a])=>{delete a.scaleNumber,delete a.octave})),b}},84:(e,a,i)=>{"use strict";var n;Object.defineProperty(a,"__esModule",{value:!0}),a.Voice=void 0;const t=i(636),o=i(504);function r(e){return e.createGain().gain}class Voice{constructor(e,a){var i,n,t,s,l,b,d,c,h;this.context=e,this.config=a;const u=(null!==(i=this.config.worklet)&&void 0!==i?i:o.OscAudioWorkletNodeFactory)(e.audio),y=e.audio.createGain(),v=e.audio.createStereoPanner();u.connect(y),y.connect(v),v.connect(e.audio.destination),this.freq=null!==(n=u.parameters.get("freq"))&&void 0!==n?n:r(e.audio),this.gain=null!==(t=u.parameters.get("gain"))&&void 0!==t?t:r(e.audio),this.timbre=null!==(s=u.parameters.get("timbre"))&&void 0!==s?s:r(e.audio),this.vibrato=null!==(l=u.parameters.get("vibrato"))&&void 0!==l?l:r(e.audio),this.vibratoFreq=null!==(b=u.parameters.get("vibratoFreq"))&&void 0!==b?b:r(e.audio),this.finalGain=y.gain,this.finalPan=v.pan,this.freq.value=440,this.gain.value=0,this.timbre.value=null!==(d=this.config.timbre)&&void 0!==d?d:0,this.vibrato.value=null!==(c=this.config.vibrato)&&void 0!==c?c:0,this.vibratoFreq.value=null!==(h=this.config.vibratoFreq)&&void 0!==h?h:4,this.finalGain.value=this.config.gain,this.finalPan.value=this.config.pan}scheduleNote(e,a){const i=e,n=i+a.duration,{gain:t,freq:o}=this;o.setValueAtTime(a.freqBase,i),a.freqSlides&&a.freqSlides.forEach((e=>{o.setValueAtTime(a.freqBase+e.deltaStart,i+e.timeStart),o.exponentialRampToValueAtTime(a.freqBase+e.deltaEnd,i+e.timeEnd)})),t.cancelScheduledValues(i),t.setValueAtTime(0,i),t.linearRampToValueAtTime(1,i+0),a.gainEvents&&a.gainEvents.forEach((({time:e,gain:a})=>{t.setValueAtTime(a,i+e)})),t.cancelScheduledValues(n-.01),t.setValueAtTime(0,n-.01),t.linearRampToValueAtTime(0,n)}}a.Voice=Voice,n=Voice,Voice.componentId=(0,t.registerComponent)(n)},248:function(e,a,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,a,i,n){void 0===n&&(n=i);var t=Object.getOwnPropertyDescriptor(a,i);t&&!("get"in t?!a.__esModule:t.writable||t.configurable)||(t={enumerable:!0,get:function(){return a[i]}}),Object.defineProperty(e,n,t)}:function(e,a,i,n){void 0===n&&(n=i),e[n]=a[i]}),t=this&&this.__exportStar||function(e,a){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(a,i)||n(a,e,i)};Object.defineProperty(a,"__esModule",{value:!0}),a.Onyx=void 0,a.Onyx=i(828),t(i(828),a)},92:function(e,a){!function(e){"use strict";var a=function(e){return function(a){var i=e(a);return a.add(i),i}},i=function(e){return function(a,i){return e.set(a,i),i}},n=void 0===Number.MAX_SAFE_INTEGER?9007199254740991:Number.MAX_SAFE_INTEGER,t=536870912,o=2*t,r=function(e,a){return function(i){var r=a.get(i),s=void 0===r?i.size:r<o?r+1:0;if(!i.has(s))return e(i,s);if(i.size<t){for(;i.has(s);)s=Math.floor(Math.random()*o);return e(i,s)}if(i.size>n)throw new Error("Congratulations, you created a collection of unique numbers which uses all available integers!");for(;i.has(s);)s=Math.floor(Math.random()*n);return e(i,s)}},s=new WeakMap,l=i(s),b=r(l,s),d=a(b);e.addUniqueNumber=d,e.generateUniqueNumber=b}(a)}},a={};function i(n){var t=a[n];if(void 0!==t)return t.exports;var o=a[n]={exports:{}};return e[n].call(o.exports,o,o.exports,i),o.exports}i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),(()=>{"use strict";var e=i(636),a=i(248);const n=173,t=a.Onyx.Key.of("Bb").minor,o=a.Onyx.Key.of("B").major,r=a.Onyx.Key.of("D#").mode("Locrian"),s={bpm:n,key:t,div:"|   |   |   |   |   |   |   |   ",seq:"5-555-553-5-  4-  7-7-7-7-7-5-5-",gls:",,1               ,,p   ,,p ",vol:"@ 86@ 86  8       @ 8 8 @ 8 9 6",oct:"4                 -"},l={bpm:n,key:t,div:"|   |   |   |   |   |   |   |   ",seq:"8-531-815-3-  2- ",gls:",,1              ",vol:"2 424 646 8      ",oct:"4       5        "},b={bpm:n,key:t,div:"|   |   |   |   |   |   |   |   ",seq:"5 1-- 551-- 5 1----- ",gls:"  ,,,8  ,,,8  ,,,,,,8",oct:"7 6   766   6 7   ",vol:"6 @   68@   4 987631"},d={bpm:n,key:t,div:"|   |   |   |   |   |   |   |   ",seq:"1---  1---  1-2---",gls:"`9    `9    `9,1  ",vol:"@@6@  @@6@  @6@@6@",oct:"1"},c={bpm:n,key:t,div:"||||||       |   ||",seq:"         0-247---",vol:"         3 59@631",oct:"9"},h={bpm:n,key:t,div:"|   |   |   |   |   |   |   |   ",seq:"5 5 1-5 5 5 1-5 5 5 1-5 5 5 1-5 ",gls:"    ,,8     ,,8     ,,8     ,,8 ",oct:"7   6 7 7   6 7 7   6 7 7   6 7 ",vol:"6   @ 6 6   @ 6 6   @ 6 6   @ 6 "},u={bpm:n,key:t,div:"|   |   |   |   |   |   |   |   |   |   |   |   |   |   |   |   ",seq:"1-1-1-1-  1-3-5-0-0 0-0 4-4-1-1-6-6-6-6-  6-1-3-0-0-0-0-  0-4-7-",vol:"@6@6@6@6  @6@   @6@ @6@ @6@6@6@6@6@6@6@6  @6@   @6@6@6@6  @6@   ",gls:"`9    `9    `7  `9      `9  `9  `9    `9    `7  `9    `9    `6  ",oct:"1                       0       0         0 1   1         1     "},y={bpm:n,key:t,div:"| | | | | | | | | | | | | | | | ",seq:"51035451045337206313487479742904",oct:"24423234244142442442424424424244",vol:"456"},v={bpm:n,key:t,div:"|   |   |   |   |   |   |   |   |   |   |   |   |   |   |   |   ",seq:"8-531-815-3-  2-  815-3-  2-  0-8-631-816-3-  2-  7-  4-  7-    ",gls:",,1                                                             ",vol:"4 626 846 8       646 8   6   2 4 624 646 8       6             ",oct:"4       5         4 5           4       5         4             "},M={bpm:n,key:t,div:"|   |   |   |   |   |   |   |   |   |   |   |   |   |   |   |   ",seq:"5-------- 1-3-7-  6-  5---3-4-5------ 8------ 9------ 4------",vol:"@49382716 @4@4@4  @4  @493@4@4@493827 @493827 @493827 @493827",gls:",q"},m={bpm:n,key:t,div:"|   |   |   |   |   |   |   |   |   |   |   |   |   |   |   |   ",seq:"  9---8-5---7-8-3-2---3---2-3-5-----------4-2-7-----------9-7-4-",vol:"  @49382@493@49382@493@4938271@493827161417182@4938271614193@4@4",gls:"  ,,1                                                     ,1    ",oct:"4               5                                           4   "},g={bpm:n,key:t,div:"|   |   |   |   |   |   |   |   |   |   |   |   |   |   |   |   ",seq:"5-------- 1-3-7-  6-  5---3-4-5------ 8------ 9---4-7-9-7------",vol:"@49382716 @4@4@4  @4  @493@4@4@493827 @493827 @493827   @493827",gls:",q                                                      ,q",oct:"4                                                       5"},p={bpm:n,key:t,div:"|       |   |   |   |   |   |   |   |   |   |   |   |   |   |   |   ",seq:"    7-7-3-7-5------                                           3-3-3-",vol:"    @4@48   @493827                                           7193@4",gls:"    ,p      ,,1                                               ,1    ",oct:"4           5                                                       "},f={bpm:n,key:t,div:"|   |   |   |   |   |   |   |   ",seq:"1-5---1-5---1-5---5 5 5 5 5 5 5 ",gls:",,5   ,,5   ,,5                 ",oct:"6     6     6     7   7   7   7 ",vol:"@86421@86421@864214 5 6 7 8 9 @ "},A={bpm:n,key:t,div:"|   |   |   |   |   |   |   |   |   |   |   |   |   |   |   |   ",seq:"6---6-6-  5-6---  1-6-5-  4-  3-1---1-1-  0-1---",vol:"@686@6@6  @6@     @6@ @6  @6    @686@6@6  @6@   ",gls:"`9    `9    `9      `3    `1    `9    `9    `9",oct:"0                 1             1"},L={bpm:n,key:t,div:"|   |   |   |   |   |   |   |   |   |   |   |   |   |   |   |   ",seq:"4---4-4-  3-4---  1-7-4-  3-  8-7---7-7-  6-7---",vol:"@ 8 @6@6  @6@     @6@ @6  @6    @ 8 @6@6  @6@   ",gls:"`9    `9    `9      `2    `2    `9    `9    `9",oct:"0                 1             0"},P={bpm:n,key:t,div:"|   |   |   |   |   |   |   |   |   |   |   |   |   |   |   |   ",seq:"4---4-4-  3-4---  6-------5-4-3-5---5-5-  4-5---",vol:"@ 8 @6@6  @6@     @8      @8@8@8@ 8 @6@6  @6@   ",gls:"`9    `9    `9    `3  `3  `4    `9    `9    `9",oct:"0                 1             0"},I={bpm:n,key:t,div:"| | | | | | | | | | | | | | | | ",seq:"61313638034373715013038597355193",oct:"24424424254144242442442424424424",vol:"6"},x={bpm:n,key:t,div:"| | | | | | | | | | | | | | | | ",seq:"61414863442664714012028497244092",oct:"24424425255144242442442424424424",vol:"6"},w={bpm:n,key:t,div:"| | | | | | | | | | | | | | | | ",seq:"61414863442664715p1p254u295u425p",oct:"24424425255144242442443434424424",vol:"6"},D={bpm:n,key:t,div:"|   |   |   |   |   |   |   |   |   |   |   |   |   |   |   |   ",seq:"3---3---3-5---4---2---    1-4-5-------    1-4-7-----  9-------- ",gls:",,1       `p      `p      ,,1             ,,1                   ",vol:"@ 93@ 93@4@ 93@ 93@ 93    @ @4@ 93        @ @4@ 93    @ 93      ",oct:"5"},k={bpm:n,key:t,div:"|   |   |   |   |   |   |   |   |   |   |   |   |   |   |   |   ",seq:"      3-- 2-- 3-- 4-5-0-----      1-4-5-----  7---6---5---4---3-",gls:"                  ,,2                         ,,2               ",vol:"      31  31  31  3   3 21        5   5 41    5 415 415 415 41  "},S={bpm:n,key:t,div:"|   |   |   |   |   |   |   |   |   |   |   |   |   |   |   |   ",seq:"  3---2-5---          6---5-3-7-------                    3-3-3-",vol:"  @ 93@4@ 93          @ 93@4@4@ 92                        7193@4",gls:"  ,,q                 ,,q                                 ,1    ",oct:"  6     5                                                       "},C={bpm:n,key:t,div:"|   |   |   |   |   |   |   |   |   |   |   |   |   |   |   |   ",seq:"          3---2-5-------          3-4-6---5-3-1-5-----4-------- ",gls:"          ,,q                                                   ",vol:"          5 41545 41              3 4 5 415 4 3 5 41  5 41      ",oct:"          5     4"},O={voices:{leadL:{timbre:2.75,gain:.08,pan:-.7},leadR:{timbre:2.75,gain:.08,pan:.7},leadC:{timbre:3,gain:.1,pan:0},bass:{timbre:1.1,gain:.5,pan:0},drums:{timbre:0,gain:.08,pan:0,worklet:a.Onyx.NESNoise},noise:{timbre:5,gain:.1,pan:0,worklet:a.Onyx.NESNoise}},sections:{intro:{leadL:[s],leadR:[l],bass:[d],drums:[b],noise:[c]},main1:{leadC:[M],leadL:[y],leadR:[v],bass:[u],drums:[h,h]},main2:{leadC:[m],leadL:[y],leadR:[v],bass:[u],drums:[h,h]},main3:{leadC:[g],leadL:[y],leadR:[v],bass:[u],drums:[h,h]},main4:{leadC:[p],leadL:[y],leadR:[v],bass:[u],drums:[h,h]},mid1:{leadC:[D],leadL:[I],leadR:[k],bass:[A],drums:[f,f]},mid2:{leadC:[S],leadL:[x],leadR:[C],bass:[L],drums:[f,f]},mid4:{leadL:[w],bass:[P],drums:[f,f]}},pre:["intro"],loop:["main1","main2","main3","main4","mid1","mid2","mid1","mid4"]},j=Object.assign(Object.assign({},O),{sections:Object.fromEntries(Object.entries(O.sections).map((([e,a])=>[e,Object.fromEntries(Object.entries(a).map((([e,a])=>[e,a.map((e=>Object.assign(Object.assign({},e),{key:o})))])))])))}),T=Object.assign(Object.assign({},O),{sections:Object.fromEntries(Object.entries(O.sections).map((([e,a])=>[e,Object.fromEntries(Object.entries(a).map((([e,a])=>[e,a.map((e=>Object.assign(Object.assign({},e),{key:r})))])))])))}),E=181,q=a.Onyx.Key.of("C").minor,B={bpm:E,key:q,div:"|   |   |   |   |   |   |   |   ",seq:"5 5 1-5 5 5 1-5 5 5 1-5 5 5 1-5 ",gls:"    ,,8     ,,8     ,,8     ,,8 ",oct:"7   6 7 7   6 7 7   6 7 7   6 7 ",vol:"6   @ 6 6   @ 6 6   @ 6 6   @ 6 "},N={bpm:E,key:q,div:"| | | | | | | | ",seq:"3533513553335335",oct:"2442444244244244"},R={bpm:E,key:q,div:"| | | | | | | | ",seq:"2422402542224224",oct:"2442444244244244"},K={bpm:E,key:q,div:"|   |   |   |   |   |   |   |   ",seq:" 3-5-3-3-5-1-3-5-5-3-3-3-5-3-3-5",oct:" 2 4 4 2 4 4 4 2 4 4 2 4 4 2 4 4",vol:"8"},_={bpm:E,key:q,div:"|   |   |   |   |   |   |   |   ",seq:" 2-4-2-2-4-0-2-5-4-2-2-2-4-2-2-4",oct:" 2 4 4 2 4 4 4 2 4 4 2 4 4 2 4 4",vol:"8"},F={bpm:E,key:q,div:"|   |   |   |   |   |   |   |   ",seq:"1---3-1-  0-3-1-1---3-1-  0-3-1-",gls:"    ``5     ``5     ``5     ``5 "},V={bpm:E,key:q,div:"|   |   |   |   |   |   |   |   ",seq:"2---3-2-  1-3-2-2---3-2-  1-3-2-",gls:"    ``5     ``5     ``5     ``5 "},H={bpm:E,key:q,div:"|   |   |   |   |   |   |   |   ",seq:"2---3-2-  1-3-2-p---3-2-  p-3-2-",gls:"    ``5     ``5     ``5     ``5 "},G={bpm:E,key:q,div:"|   |   |   |   |   |   |   |   |   |   |   |   |   |   |   |   ",seq:"3-----  3-4-  5-  4-  3-  3-4-- 2-3-2 2-  1-- 0-----  7---- 6---",oct:"5"},U={bpm:E,key:q,div:"|   |   |   |   |   |   |   |   |   |   |   |   |   |   |   |   ",seq:"5-----  5-4-3-7-  6-  5-  5-8-u-------    5-u-9-------          ",oct:"5"},z={voices:{leadL:{timbre:3,gain:.06,pan:-.33},leadR:{timbre:3,gain:.06,pan:.33},leadC:{timbre:3,gain:.1,pan:0,vibrato:-.5,vibratoFreq:8},bass:{timbre:1,gain:.5,pan:0},noise:{timbre:0,gain:.08,pan:0,worklet:a.Onyx.NESNoise}},sections:{walk:{leadL:[F,V,F,H],leadR:[K,_,K,_],bass:[N,R,N,R],noise:[B,B,B,B]},walkWithMelody:{leadC:[G,U],leadL:[F,V,F,H],leadR:[K,_,K,_],bass:[N,R,N,R],noise:[B,B,B,B]}},loop:["walk","walkWithMelody"]},W=241,$=a.Onyx.Key.of("D").minor,Z=a.Onyx.Key.of("D#").mode("Bothian"),J={bpm:W,key:$,div:"| | | | | | | | | | | | | | | | ",seq:"0135----5431----4310----1-------",gls:",p      `p       ",vol:"@89@ 2  @89@ 2  @89@ 2  @ 282622",oct:"5"},Q={bpm:W,key:$,div:"| | | | | | | | | | | | | | | | ",seq:"0135----5431----4310----7-------",gls:",p      `p              ,,q",vol:"@89@ 2  @89@ 2  @89@ 2  @ 282622",oct:"5"},X={bpm:W,key:$,div:"| | | | | | | | | | | | | | | | ",seq:"7540----4435----3479 8-7--------",gls:",p      ,p              ",vol:"@89@ 2  @89@ 2  @89@   @ 282622",oct:"5"},Y={bpm:W,key:$,div:"|   |   |   |   |   |   |   |   ",seq:"1-- 0-1-3-- 1-3-5-7-5-  4-  3-  ",gls:",,1             ,,1",vol:"",oct:"4"},ee={bpm:W,key:$,div:"|   |   |   |   |   |   |   |   ",seq:"5-- 4-5-8-- 5-1-3-5-3-  2-  1-  ",gls:",,1             ,,1",vol:"",oct:"4             5"},ae={bpm:W,key:$,div:"|   |   |   |   |   |   |   |   ",seq:"1---  1---  1-----------        ",gls:"`9    `9    ````````````8       ",vol:"@@6@  @@6@  @6@@6@              ",oct:"2"},ie={bpm:W,key:$,div:"|   |   |   |   |   |   |   |   ",seq:"5 2 2 5 2 2 1---5 2 2 5 2 1-1---",gls:"            ,,8           ,8,,8 ",oct:"7     7     6   7     7   6 6   ",vol:"6 3 3 6 3 3 @7536 3 3 6 3 @7@753"},ne={voices:{leadL:{timbre:3.75,gain:.05,pan:-.33},leadR:{timbre:3.75,gain:.05,pan:.33},leadC:{timbre:2.5,gain:.1,pan:0,vibrato:-.5,vibratoFreq:6},bass:{timbre:1,gain:.5,pan:0},noise:{timbre:0,gain:.08,pan:0,worklet:a.Onyx.NESNoise}},sections:{main1:{leadL:[Y,Y],leadR:[ee,ee],leadC:[J],bass:[ae,ae],noise:[ie,ie]},main3:{leadL:[Y,Y],leadR:[ee,ee],leadC:[Q],bass:[ae,ae],noise:[ie,ie]},main4:{leadC:[X],bass:[ae,ae],noise:[ie,ie]}},loop:["main1","main1","main3","main4"]},te=Object.assign(Object.assign({},ne),{sections:Object.fromEntries(Object.entries(ne.sections).map((([e,a])=>[e,Object.fromEntries(Object.entries(a).map((([e,a])=>[e,a.map((e=>Object.assign(Object.assign({},e),{key:Z})))])))])))});var oe=i(92);const re=((e,a)=>{let i=null;return()=>{if(null!==i)return i;const n=new Blob([a],{type:"application/javascript; charset=utf-8"}),t=URL.createObjectURL(n);return i=e(t),setTimeout((()=>URL.revokeObjectURL(t))),i}})((e=>{const a=new Map([[0,()=>{}]]),i=new Map([[0,()=>{}]]),n=new Map,t=new Worker(e);t.addEventListener("message",(({data:e})=>{if(void 0!==(t=e).method&&"call"===t.method){const{params:{timerId:t,timerType:o}}=e;if("interval"===o){const e=a.get(t);if("number"==typeof e){const a=n.get(e);if(void 0===a||a.timerId!==t||a.timerType!==o)throw new Error("The timer is in an undefined state.")}else{if(void 0===e)throw new Error("The timer is in an undefined state.");e()}}else if("timeout"===o){const e=i.get(t);if("number"==typeof e){const a=n.get(e);if(void 0===a||a.timerId!==t||a.timerType!==o)throw new Error("The timer is in an undefined state.")}else{if(void 0===e)throw new Error("The timer is in an undefined state.");e(),i.delete(t)}}}else{if(!(e=>null===e.error&&"number"==typeof e.id)(e)){const{error:{message:a}}=e;throw new Error(a)}{const{id:t}=e,o=n.get(t);if(void 0===o)throw new Error("The timer is in an undefined state.");const{timerId:r,timerType:s}=o;n.delete(t),"interval"===s?a.delete(r):i.delete(r)}}var t}));return{clearInterval:e=>{const i=(0,oe.generateUniqueNumber)(n);n.set(i,{timerId:e,timerType:"interval"}),a.set(e,i),t.postMessage({id:i,method:"clear",params:{timerId:e,timerType:"interval"}})},clearTimeout:e=>{const a=(0,oe.generateUniqueNumber)(n);n.set(a,{timerId:e,timerType:"timeout"}),i.set(e,a),t.postMessage({id:a,method:"clear",params:{timerId:e,timerType:"timeout"}})},setInterval:(e,i=0)=>{const n=(0,oe.generateUniqueNumber)(a);return a.set(n,(()=>{e(),"function"==typeof a.get(n)&&t.postMessage({id:null,method:"set",params:{delay:i,now:performance.now(),timerId:n,timerType:"interval"}})})),t.postMessage({id:null,method:"set",params:{delay:i,now:performance.now(),timerId:n,timerType:"interval"}}),n},setTimeout:(e,a=0)=>{const n=(0,oe.generateUniqueNumber)(i);return i.set(n,e),t.postMessage({id:null,method:"set",params:{delay:a,now:performance.now(),timerId:n,timerType:"timeout"}}),n}}}),'(()=>{"use strict";const e=new Map,t=new Map,r=(e,t)=>{let r,o;const i=performance.now();r=i,o=e-Math.max(0,i-t);return{expected:r+o,remainingDelay:o}},o=(e,t,r,i)=>{const s=performance.now();s>r?postMessage({id:null,method:"call",params:{timerId:t,timerType:i}}):e.set(t,setTimeout(o,r-s,e,t,r,i))};addEventListener("message",(i=>{let{data:s}=i;try{if("clear"===s.method){const{id:r,params:{timerId:o,timerType:i}}=s;if("interval"===i)(t=>{const r=e.get(t);if(void 0===r)throw new Error(\'There is no interval scheduled with the given id "\'.concat(t,\'".\'));clearTimeout(r),e.delete(t)})(o),postMessage({error:null,id:r});else{if("timeout"!==i)throw new Error(\'The given type "\'.concat(i,\'" is not supported\'));(e=>{const r=t.get(e);if(void 0===r)throw new Error(\'There is no timeout scheduled with the given id "\'.concat(e,\'".\'));clearTimeout(r),t.delete(e)})(o),postMessage({error:null,id:r})}}else{if("set"!==s.method)throw new Error(\'The given method "\'.concat(s.method,\'" is not supported\'));{const{params:{delay:i,now:n,timerId:a,timerType:d}}=s;if("interval"===d)((t,i,s)=>{const{expected:n,remainingDelay:a}=r(t,s);e.set(i,setTimeout(o,a,e,i,n,"interval"))})(i,a,n);else{if("timeout"!==d)throw new Error(\'The given type "\'.concat(d,\'" is not supported\'));((e,i,s)=>{const{expected:n,remainingDelay:a}=r(e,s);t.set(i,setTimeout(o,a,t,i,n,"timeout"))})(i,a,n)}}}}catch(e){postMessage({error:{message:e.message},id:s.id,result:null})}}))})();'),se=150,le=a.Onyx.Key.of("G").minor,be=a.Onyx.Key.of("Ab").major,de={bpm:se,key:le,div:"||",seq:"5-",oct:"3"},ce={bpm:se,key:le,div:"||",seq:"4-",oct:"3"},he={bpm:se,key:le,div:"|   |   |   |   |   |   |   |   |   |   |   |   |   |   |   |   ",seq:"1---------1-2-3-2---5-------2---321-------------------------5---",oct:"4                                                           3   "},ue={bpm:se,key:le,div:"|   |   |   |   |   |   |   |   |   |   |   |   |   |   |   |   ",seq:"3---1---5-3-2-1-5---2---u---4---543-1---3---5---2---4---5---4---",oct:"3"},ye={bpm:se,key:le,div:"||||||||||||||||",seq:"1-3-0-5-1-5-0-5-",oct:"2 2 2 - 2 2 2 - "},ve={bpm:se,key:le,div:"|   |   |   |   |   |   |   |   |   |   |   |   |   |   |   |   ",seq:"1---------1-2-3-4-------2---0---545-------------------------5---",oct:"4                                                           3   "},Me={bpm:se,key:le,div:"|   |   |   |   |   |   |   |   |   |   |   |   |   |   |   |   ",seq:"3---1---5-3-2-1-2---0---4---5---7---5---3---5---u---4---2---4---",oct:"3"},me={bpm:se,key:le,div:"||||||||||||||||",seq:"1-3-0---3-5-2-5-",oct:"2 2 2   2 2 2 - "},ge={bpm:se,key:le,div:"|   |   |   |   |   |   |   |   |   |   |   |   |   |   |   |   ",seq:"1---------1-2-3-2---5-------2---34321-----------------------5---",oct:"4                                                           3   "},pe={bpm:se,key:le,div:"|   |   |   |   |   |   |   |   |   |   |   |   |   |   |   |   ",seq:"3---1---5-3-2-1-5---2---u---4---5---3---1---3---2---4---5---4---",oct:"3"},fe={bpm:se,key:le,div:"|   |   |   |   |   |   |   |   |   |   |   |   |   |   |   |   ",seq:"1---------1-2-3-2-------0---2---321-------------------------5---",oct:"4"},Ae={bpm:se,key:le,div:"|   |   |   |   |   |   |   |   |   |   |   |   |   |   |   |   ",seq:"3---1---5-3-2-1-6---4---2---0---543-------------853---------3---",oct:"3                                                           4   "},Le={bpm:se,key:le,div:"||||||||||||||||",seq:"1-3-0-2-1-5-1-5-",oct:"2 2 2 2 2 - 2 - "},Pe={bpm:se,key:le,div:"|   |   |   |   |   |   |   |   |   |   |   |   |   |   |   |   ",seq:"8-------7---6---78765-------5---6-------4---7---5-----------5---",oct:"4"},Ie={bpm:se,key:le,div:"|   |   |   |   |   |   |   |   |   |   |   |   |   |   |   |   ",seq:"4---2-------4---56543-------7---4-----4-2---2---32343-------3---",oct:"4"},xe={bpm:se,key:le,div:"||||||||||||||||",seq:"6-47303-20-43037",oct:"1   2 2 2 - 2 - "},we={bpm:se,key:le,div:"|   |   |   |   |   |   |   |   |   |   |   |   |   |   |   |   ",seq:"8-------7---6---54345-------5---r-------2---y---uy5---------5---",oct:"4                                                           3   "},De={bpm:se,key:le,div:"|   |   |   |   |   |   |   |   |   |   |   |   |   |   |   |   ",seq:"4-------3---2---76567-------3---y-----y-r---y---4---2---p---4---",oct:"4               3           4   3               4           3   "},ke={bpm:se,key:le,div:"||||||||||||||||",seq:"64043-0-2-y-5-  ",oct:"2   2 2 2 -     "},Se={voices:{leadL:{timbre:3.5,gain:.06,pan:-.33},leadR:{timbre:3.5,gain:.06,pan:.33},bass:{timbre:1,gain:.6,pan:0},noise:{timbre:0,gain:.08,pan:0,worklet:a.Onyx.NESNoise}},sections:{pre:{leadL:[de],leadR:[ce]},main1:{leadL:[he],leadR:[ue],bass:[ye]},main2:{leadL:[ve],leadR:[Me],bass:[me]},main3:{leadL:[ge],leadR:[pe],bass:[ye]},main4:{leadL:[fe],leadR:[Ae],bass:[Le]},mid1:{leadL:[Pe],leadR:[Ie],bass:[xe]},mid2:{leadL:[we],leadR:[De],bass:[ke]}},pre:["pre"],loop:["main1","main2","main3","main4","mid1","mid2"]},Ce=Object.assign(Object.assign({},Se),{sections:Object.fromEntries(Object.entries(Se.sections).map((([e,a])=>[e,Object.fromEntries(Object.entries(a).map((([e,a])=>[e,a.map((e=>Object.assign(Object.assign({},e),{key:be})))])))])))}),Oe=new e.World;Oe.addSystems([a.Onyx.ArrangementPlaySystem(Oe)]),((...e)=>{re().setInterval(...e)})((()=>{Oe.clock.tick(performance.now())}),500);const je=Oe.create(),Te=e=>{const i=new a.Onyx.ArrangementPlay(e);i.setupVoicesIfNeeded(Ee),Oe.set(je,[Ee,i])};let Ee;a.Onyx.Context.setup().then((e=>{Ee=e;const i=()=>{switch(console.log(window.location.hash),window.location.hash){case"#silence":Oe.remove(je,[a.Onyx.ArrangementPlay]);break;case"#blossoming-blade":Te(O);break;case"#blossoming-blade-major":Te(j);break;case"#blossoming-blade-locrian":Te(T);break;case"#bubble-man":Te(z);break;case"#stage-select-screen":Te(ne);break;case"#stage-select-screen-weirdmer":Te(te);break;case"#eight-eyes":Te(Se);break;case"#eight-eyes-major":Te(Ce)}};window.addEventListener("hashchange",i),i()}))})()})();