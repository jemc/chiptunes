(()=>{"use strict";var t={480:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.AutoMap=void 0;class AutoMap extends Map{constructor(t){super(),this.vClass=t}getOrCreate(t){const e=this.get(t);if(e)return e;const s=new this.vClass;return this.set(t,s),s}}e.AutoMap=AutoMap},376:(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.BitMask=void 0;const o=s(872);e.BitMask=class BitMask{constructor(t=16){const e=Math.ceil(t/16);this.data=new Uint16Array(e)}clear(){this.data.fill(0)}set(t,e){const s=t>>4,i=1<<t%16;if(this.data.length<=s){const t=(0,o.roundUpToPowerOfTwo)(s+1),e=new Uint16Array(t).fill(0);e.set(this.data),this.data=e}return e?this.data[s]|=i:this.data[s]&=~i,!0}isSuperSetOf(t){for(var e,s,o=0;o<this.data.length;o++){const i=null!==(e=this.data[o])&&void 0!==e?e:0,r=null!==(s=t.data[o])&&void 0!==s?s:0;if((r&i)!==r)return!1}return!0}}},764:(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.MutableBox2=e.Box2=void 0;const o=s(724);class BaseBox2{constructor(t,e){this.center=t,this.radii=e}isEqualTo(t){return this.center.isEqualTo(t.center)&&this.radii.isEqualTo(t.radii)}doesContain(t){return!(Math.abs(t.x-this.center.x)>this.radii.x)&&!(Math.abs(t.y-this.center.y)>this.radii.y)}get x(){return this.center.x}get y(){return this.center.y}get x0(){return this.center.x-this.radii.x}get y0(){return this.center.y-this.radii.y}get x1(){return this.center.x+this.radii.x}get y1(){return this.center.y+this.radii.y}get width(){return this.radii.x+this.radii.x}get height(){return this.radii.y+this.radii.y}}class Box2 extends BaseBox2{constructor(t=new o.Vector2,e=new o.Vector2){super(t,e),this.center=t,this.radii=e}static fromLeftTopWidthHeight(t,e,s,i){const r=new o.Vector2(s/2,i/2);return new Box2(new o.Vector2(t+r.x,e+r.y),r)}__preventTypeConfusion(){return"immutable"}}e.Box2=Box2;e.MutableBox2=class MutableBox2 extends BaseBox2{constructor(t=new o.MutableVector2,e=new o.MutableVector2){super(t,e),this.center=t,this.radii=e}__preventTypeConfusion(){return"mutable"}copyFrom(t){return this.center.copyFrom(t.center),this.radii.copyFrom(t.radii),this}}},816:(t,e,s)=>{var o;Object.defineProperty(e,"__esModule",{value:!0}),e.ButtonSourceSystem=e.ButtonSourceConfig=e.ButtonSource=e.ButtonState=e.Button=void 0;const i=s(100);var r;!function(t){t[t.Start=0]="Start",t[t.Select=1]="Select",t[t.Up=2]="Up",t[t.Down=3]="Down",t[t.Left=4]="Left",t[t.Right=5]="Right",t[t.A=6]="A",t[t.B=7]="B",t[t.X=8]="X",t[t.Y=9]="Y"}(r||(e.Button=r={}));e.ButtonState=class ButtonState{constructor(t){this.clock=t,this.pressedAt=new Array}capture(t){void 0===this.pressedAt[t]&&(this.pressedAt[t]=this.clock.frame+1)}release(t){delete this.pressedAt[t]}isPressed(t){return void 0!==this.pressedAt[t]}isPressedJustNow(t){return this.pressedAt[t]===this.clock.frame}};class ButtonSource{constructor(t,e){this.state=t,this.config=e}captureKeyboardEvent(t){const e=this.config.keyboard[t.code];return!!e&&void 0!==e.find((e=>{if(!e.ignoreModifiers){if(t.altKey!=!!e.alt)return!1;if(t.ctrlKey!=!!e.ctrl)return!1;if(t.shiftKey!=!!e.shift)return!1}return this.state.capture(e.button),!0}))}releaseKeyboardEvent(t){const e=this.config.keyboard[t.code];if(!e)return;let s=!1;for(const t of e)this.state.isPressed(t.button)&&(this.state.release(t.button),s=!0);return s}}e.ButtonSource=ButtonSource,o=ButtonSource,ButtonSource.componentId=(0,i.registerComponent)(o),e.ButtonSourceConfig={Default:{keyboard:{Enter:[{button:r.Start}],RightShift:[{button:r.Select}],ArrowUp:[{button:r.Up}],ArrowDown:[{button:r.Down}],ArrowLeft:[{button:r.Left}],ArrowRight:[{button:r.Right}],KeyW:[{button:r.Up}],KeyA:[{button:r.Left}],KeyS:[{button:r.Down}],KeyD:[{button:r.Right}],KeyZ:[{button:r.A}],KeyX:[{button:r.B}],KeyC:[{button:r.X}],KeyV:[{button:r.Y}],ControlRight:[{button:r.A}],AltRight:[{button:r.B}]}}},e.ButtonSourceSystem=function(t,e){const s=new Map;return e.addEventListener("keydown",(t=>{const e=t;for(const o of s.values())o.captureKeyboardEvent(e)&&t.preventDefault()})),e.addEventListener("keyup",(t=>{const e=t;for(const o of s.values())o.releaseKeyboardEvent(e)&&t.preventDefault()})),t.systemFor([ButtonSource],{runEachSet(t,e){s.set(t,e)},runEachRemoved(t){s.delete(t)}})}},185:(t,e,s)=>{var o;Object.defineProperty(e,"__esModule",{value:!0}),e.ChildOf=void 0;const i=s(100);class ChildOf{constructor(t){this.parent=t}}e.ChildOf=ChildOf,o=ChildOf,ChildOf.componentId=(0,i.registerComponent)(o)},676:(t,e,s)=>{var o;Object.defineProperty(e,"__esModule",{value:!0}),e.Clock=void 0;const i=null===(o=s.g.window)||void 0===o?void 0:o.requestAnimationFrame;e.Clock=class Clock{constructor(t=(()=>{}),e=(null!=i?i:void 0)){this.runFn=t,this.requestNextFrame=e,this.frame=0,this.timestamp=0,this.currentFramesPerSecond=0,this.alreadyStarted=!1,this.tickAndKeepRunningFn=this.tickAndKeepRunning.bind(this)}startRunning(){this.alreadyStarted||(this.requestNextFrame&&this.requestNextFrame(this.tickAndKeepRunningFn),this.alreadyStarted=!0)}tickAndKeepRunning(t){this.tick(t),i(this.tickAndKeepRunningFn)}tick(t){const e=1e3/(t-this.timestamp);if(this.slowMotionFactor&&this.slowMotionFactor>60/e)return;const s=this;s.frame++,s.timestamp=t,s.currentFramesPerSecond=e,this.runFn()}}},100:(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.newEntityPoolWithStaticComponentsReserved=e.getComponentClassById=e.registerComponent=void 0;const o=s(216),i=new o.EntityPool,r=[];e.registerComponent=function(t){if(Object.isFrozen(i))throw new Error("A component can only be registered statically before any world is created. After that they can only be registered dynamically with an individual world (which is not yet supported).");const e=i.alloc();return r[e]=t,e},e.getComponentClassById=function(t){return r[t]},e.newEntityPoolWithStaticComponentsReserved=function(){return Object.freeze(i),new o.EntityPool(i)}},704:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0})},216:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.EntityPool=void 0;e.EntityPool=class EntityPool{constructor(t){this.bitPool=new Uint8Array(1024).fill(255),this.firstNonZeroByteIndex=0,t&&(this.bitPool=new Uint8Array(t.bitPool.length).fill(255),this.bitPool.set(t.bitPool),this.firstNonZeroByteIndex=t.firstNonZeroByteIndex)}get capacity(){return 8*this.bitPool.length}alloc(){const t=this.firstNonZeroByteIndex;var e=this.bitPool[t];const s=Math.log2(e&-e);if(e&=~(1<<s),this.bitPool[t]=e,0==e&&(this.firstNonZeroByteIndex++,this.firstNonZeroByteIndex>=this.bitPool.length)){const t=new Uint8Array(2*this.bitPool.length).fill(255);t.set(this.bitPool),this.bitPool=t}return(t<<3)+s}free(t){const e=t>>3,s=7&t;this.bitPool[e]|=1<<s,e<this.firstNonZeroByteIndex&&(this.firstNonZeroByteIndex=e)}}},248:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.LoadAsset=void 0;e.LoadAsset=class LoadAsset{constructor(t){this.url=t,setTimeout((()=>this.load()))}get result(){return this._result}get isFinished(){return void 0!==this._result}finished(t){this.isFinished||(this._result=t)}}},351:(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.LoadBlobAsset=void 0;const o=s(248);class LoadBlobAsset extends o.LoadAsset{load(){const t=this,e=new XMLHttpRequest;e.responseType="blob",e.onload=()=>t.finished(e.response),e.open("GET",t.url+"?cb="+Date.now(),!0),e.send()}}e.LoadBlobAsset=LoadBlobAsset},528:(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.LoadImageAsset=void 0;const o=s(248);class LoadImageAsset extends o.LoadAsset{load(){const t=this,e=new Image;e.onload=()=>t.finished(e),e.crossOrigin="anonymous",e.src=t.url+"?cb="+Date.now()}}e.LoadImageAsset=LoadImageAsset},872:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.isPowerOfTwo=e.roundUpToPowerOfTwo=e.toDegrees=e.toRadians=void 0;const s=Math.PI/180;e.toRadians=function(t){return t*s};const o=180/Math.PI;e.toDegrees=function(t){return t*o},e.roundUpToPowerOfTwo=function(t){const e=t<0?-1:1;return t*=e,t-=1,t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,t|=t>>16,t|=t>>32,(t+=1)*e},e.isPowerOfTwo=function(t){return 0==(t&t-1)}},116:(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Matrix3=void 0;const o=s(724);e.Matrix3=class Matrix3{static create(){return this.setToIdentity(new Float32Array(9))}static setToIdentity(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}static setTransformRows(t,e,s,o,i){t[0]=o*s.x,t[1]=-i*s.y,t[2]=Math.floor(e.x),t[3]=i*s.x,t[4]=o*s.y,t[5]=Math.floor(e.y)}static multiply(t,e,s){{const o=t[0],i=t[1],r=t[2],n=t[3],a=t[4],c=t[5],u=t[6],l=t[7],d=t[8],h=e[0],f=e[1],m=e[2],y=e[3],p=e[4],v=e[5],b=e[6],g=e[7],w=e[8];s[0]=h*o+f*n+m*u,s[1]=h*i+f*a+m*l,s[2]=h*r+f*c+m*d,s[3]=y*o+p*n+v*u,s[4]=y*i+p*a+v*l,s[5]=y*r+p*c+v*d,s[6]=b*o+g*n+w*u,s[7]=b*i+g*a+w*l,s[8]=b*r+g*c+w*d}return s}static applyToVector2(t,e){return new o.Vector2(e.x*t[0]+e.y*t[1]+t[2],e.x*t[3]+e.y*t[4]+t[5])}}},260:(t,e,s)=>{var o;Object.defineProperty(e,"__esModule",{value:!0}),e.StatusSystem=e.Status=void 0;const i=s(100);class Status{constructor(t,e){var s,o;this.clock=t,this.configs={},this.map={},this.configs=e;for(const[t,o]of Object.entries(e))if(o.blocks)for(const e of o.blocks){const o=this.configs[e];o&&(o.blockedBy=null!==(s=o.blockedBy)&&void 0!==s?s:[],o.blockedBy.push(t))}for(const[t,s]of Object.entries(e))if(s.sustains)for(const e of s.sustains){const s=this.configs[e];s&&(s.sustainedBy=null!==(o=s.sustainedBy)&&void 0!==o?o:[],s.sustainedBy.push(t))}for(const[t,s]of Object.entries(e))s.setAtStart&&this.set(t)}get list(){return Object.keys(this.map)}is(t){return void 0!==this.map[t]}isStarting(t){return this.map[t]===this.clock.frame}stop(t){if(void 0===this.map[t])return;const e=this.configs[t];if(null==e?void 0:e.sustainedBy)for(const t of e.sustainedBy)if(this.is(t))return;delete this.map[t],(null==e?void 0:e.then)&&e.then.forEach((t=>this.set(t)))}set(t,e=!0){if(!e)return void this.stop(t);if(void 0!==this.map[t])return;const s=this.configs[t];if(null==s?void 0:s.blockedBy)for(const t of s.blockedBy)if(this.is(t))return;this.map[t]=this.clock.frame,(null==s?void 0:s.sets)&&s.sets.forEach((t=>this.set(t))),(null==s?void 0:s.stops)&&s.stops.forEach((t=>this.stop(t)))}setMany(t){for(const[e,s]of Object.entries(t))this.set(e,s)}each(t){for(const[e,s]of Object.entries(this.map)){const o=this.configs[e];o&&t(e,o,s)}}noticeTime(){for(const[t,e]of Object.entries(this.map)){const s=this.configs[t];(null==s?void 0:s.maxFrames)&&(null==s?void 0:s.maxFrames)<this.clock.frame-e&&this.stop(t)}}}e.Status=Status,o=Status,Status.componentId=(0,i.registerComponent)(o);e.StatusSystem=t=>t.systemFor([Status],{runEach(t,e){e.noticeTime()}})},605:(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.System=void 0;const o=s(376);e.System=class System{constructor(t){this.componentTypes=t,this._requiredBits=new o.BitMask,this._entities=new Map}setEntityComponents(t,e){const s=this._entities.size;this._entities.set(t,e),s!==this._entities.size?this.runEachAdded(t,...e):this.runEachModified(t,...e),this.runEachSet(t,...e)}removeEntityIfPresent(t){const e=this._entities.size;this._entities.delete(t),e!==this._entities.size&&this.runEachRemoved(t)}run(t){for(const[e,s]of t.entries())this.runEach(e,...s)}runEach(t,...e){}runEachAdded(t,...e){}runEachModified(t,...e){}runEachSet(t,...e){}runEachRemoved(t){}}},748:(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Uint32Array2D=void 0;const o=s(724);class Uint32Array2D{get width(){return this.size.x}get height(){return this.size.y}constructor(t,e=new o.Vector2(0,0)){this.size=t,this.offset=e,this.buffer=new ArrayBuffer(this.width*this.height*4),this.rawBytes=new Uint8Array(this.buffer),this.rawUint32s=new Uint32Array(this.buffer)}static fromArrayLiterals(t,e=new o.Vector2(0,0)){var s,i;const r=new o.Vector2(null!==(i=null===(s=t[0])||void 0===s?void 0:s.length)&&void 0!==i?i:0,t.length),n=new Uint32Array2D(r,e);return n.rawUint32s.set(t.flat()),n}get(t,e){var s;return t-=this.offset.x,e-=this.offset.y,t<0||e<0||t>=this.width||e>=this.height?0:null!==(s=this.rawUint32s[t+e*this.width])&&void 0!==s?s:0}set(t,e,s){if(t-=this.offset.x,e-=this.offset.y,t<0||e<0||t>=this.width||e>=this.height)throw new Error(`set element out of bounds: (${t}, ${e}) within ${this.size.x} x ${this.size.y} size with offset (${this.offset.x}, ${this.offset.y})`);this.rawUint32s[t+e*this.width]=s}forEach(t){for(var e=0;e<this.rawUint32s.length;e++){const s=e%this.width,o=Math.floor(e/this.width);t(this.rawUint32s[e],s+this.offset.x,o+this.offset.y)}}cloneWithoutOffset(){const t=new Uint32Array2D(this.size.plus(this.offset));return t.rawUint32s.fill(0),this.forEach(((e,s,o)=>{t.rawUint32s[s+o*t.width]=e})),t}}e.Uint32Array2D=Uint32Array2D},724:(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.MutableVector2=e.Vector2=void 0;const o=s(872);class BaseVector2{constructor(t=0,e=0){this.x=t,this.y=e}isEqualTo(t){return this.x===t.x&&this.y===t.y}clone(){return new Vector2(this.x,this.y)}cloneMutable(){return new MutableVector2(this.x,this.y)}magnitude(){return Math.sqrt(this.magnitudeSquared())}magnitudeSquared(){return this.x*this.x+this.y*this.y}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}plus(t){return new Vector2(this.x+t.x,this.y+t.y)}minus(t){return new Vector2(this.x-t.x,this.y-t.y)}scale(t){return new Vector2(this.x*t,this.y*t)}}class Vector2 extends BaseVector2{__preventTypeConfusion(){return"immutable"}}e.Vector2=Vector2;class MutableVector2 extends BaseVector2{constructor(t=0,e=0){super(t,e),this.x=t,this.y=e}__preventTypeConfusion(){return"mutable"}setTo(t,e){return this.x=t,this.y=e,this}copyFrom(t){return this.x=t.x,this.y=t.y,this}setUnitRotationRadians(t){return this.x=Math.cos(t),this.y=Math.sin(t),this}setUnitRotationDegrees(t){return this.setUnitRotationRadians((0,o.toRadians)(t)),this}toFloor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}toRoundedCapturingResiduals(t){const{x:e,y:s}=this;return this.x=Math.round(e),this.y=Math.round(s),t.x=e-this.x,t.y=s-this.y,this}plusEquals(t){return this.x+=t.x,this.y+=t.y,this}plusScalarEquals(t){return this.x+=t,this.y+=t,this}minusEquals(t){return this.x-=t.x,this.y-=t.y,this}minusScalarEquals(t){return this.x-=t,this.y-=t,this}multiplyEquals(t){return this.x*=t.x,this.y*=t.y,this}scaleEquals(t){return this.x*=t,this.y*=t,this}inverseScaleEquals(t){return this.x/=t,this.y/=t,this}plusScaledEquals(t,e){return this.x+=t.x*e,this.y+=t.y*e,this}}e.MutableVector2=MutableVector2},776:(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.World=void 0;const o=s(100),i=s(605),r=s(676),n=s(376),a=Array;e.World=class World{constructor(){this.storage=[],this.entityBitMasks=[],this.entityPool=(0,o.newEntityPoolWithStaticComponentsReserved)(),this.systems=[],this.clock=new r.Clock((()=>this.run()))}startRunning(){this.clock.startRunning()}systemFor(t,e){return Object.assign(new i.System(t),e)}create(t){const e=this.entityPool.alloc();return t&&this.set(e,t),e}debugInfoFor(t){const e={};return this.storage.forEach(((s,i)=>{var r,n;const a=null==s?void 0:s[t];if(!a)return;const c=null!==(n=null===(r=(0,o.getComponentClassById)(i))||void 0===r?void 0:r.name)&&void 0!==n?n:`${i}`;e[c]=a})),e}destroy(t){var e;this.systems.forEach((e=>e.removeEntityIfPresent(t))),null===(e=this.entityBitMasks[t])||void 0===e||e.clear(),this.storage.forEach((e=>e?e[t]=void 0:void 0)),this.entityPool.free(t)}get(t,e){var s;return null===(s=this.storage[e.componentId])||void 0===s?void 0:s[t]}set(t,e){var s,o,i,r;const c=null!==(s=(i=this.entityBitMasks)[t])&&void 0!==s?s:i[t]=new n.BitMask(62);for(const s of e){const{componentId:e}=s.constructor;c.set(e,!0);(null!==(o=(r=this.storage)[e])&&void 0!==o?o:r[e]=new a)[t]=s}this.updateSystemsForEntity(t,c)}remove(t,e){const s=this.entityBitMasks[t];if(s){for(const o of e){const{componentId:e}=o;s.set(e,!1);const i=this.storage[e];i&&(i[t]=void 0)}this.updateSystemsForEntity(t,s)}}addSystem(t){this.systems.push(t),t.componentTypes.forEach((({componentId:e})=>{t._requiredBits.set(e,!0)})),this.entityBitMasks.forEach(((e,s)=>{this.updateSystemForEntity(t,s,e)}))}addSystems(t=[]){for(const e of t)this.addSystem(e)}run(){for(const t of this.systems)t.run(t._entities)}updateSystemsForEntity(t,e){for(const s of this.systems)this.updateSystemForEntity(s,t,e)}updateSystemForEntity(t,e,s){s.isSuperSetOf(t._requiredBits)?t.setEntityComponents(e,t.componentTypes.map((t=>this.get(e,t)))):t.removeEntityIfPresent(e)}}},956:function(t,e,s){var o=this&&this.__createBinding||(Object.create?function(t,e,s,o){void 0===o&&(o=s);var i=Object.getOwnPropertyDescriptor(e,s);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[s]}}),Object.defineProperty(t,o,i)}:function(t,e,s,o){void 0===o&&(o=s),t[o]=e[s]}),i=this&&this.__exportStar||function(t,e){for(var s in t)"default"===s||Object.prototype.hasOwnProperty.call(e,s)||o(e,t,s)};Object.defineProperty(e,"__esModule",{value:!0}),i(s(480),e),i(s(764),e),i(s(816),e),i(s(185),e),i(s(676),e),i(s(100),e),i(s(704),e),i(s(248),e),i(s(351),e),i(s(528),e),i(s(872),e),i(s(116),e),i(s(260),e),i(s(605),e),i(s(748),e),i(s(724),e),i(s(776),e)},184:(t,e,s)=>{var o;Object.defineProperty(e,"__esModule",{value:!0}),e.ArrangementPlaySystem=e.ArrangementPlay=void 0;const i=s(972),r=s(956),n=s(264),a=s(92);class ArrangementPlay{constructor(t){this.config=t,this.voices={},this.pendingNotes={},this.scheduledSections=0,this.scheduleFinishTime=0}setupVoicesIfNeeded(t){var e,s,o,r;for(const[n,a]of Object.entries(this.config.voices))null!==(e=(o=this.voices)[n])&&void 0!==e||(o[n]=new i.Voice(t,a)),null!==(s=(r=this.pendingNotes)[n])&&void 0!==s||(r[n]=[])}scheduleSectionsIfNeeded(t){var e;if(t<=this.scheduleFinishTime)return;console.log(t,this.scheduleFinishTime);const{pre:s,loop:o}=this.config,i=null!==(e=null==s?void 0:s.length)&&void 0!==e?e:0;if(s&&this.scheduledSections<i)this.scheduleSection(s[this.scheduledSections],this.scheduleFinishTime),this.scheduledSections++;else if(o){console.log("Scheduling loop section "+(this.scheduledSections-i));let t=this.scheduledSections-i;for(;t>=o.length;)t-=o.length;this.scheduleSection(o[t],this.scheduleFinishTime),this.scheduledSections++}}scheduleSection(t,e=0){console.log(`Scheduling section ${t} at ${e}`);const s=this.config.sections[t];if(!s)throw new Error(`No section named ${t}`);let o=0;for(const[t,i]of Object.entries(s)){const s=this.voices[t];if(!s)throw new Error(`No voice named ${t}`);let r=e;for(const t of i)s.applyRiff(t,r),r+=(0,a.riffDuration)(t);r>o&&(o=r)}this.scheduleFinishTime=o}continuePlaying(t,e){this.scheduleSectionsIfNeeded(e.timestamp/1e3+.1)}}e.ArrangementPlay=ArrangementPlay,o=ArrangementPlay,ArrangementPlay.componentId=(0,r.registerComponent)(o);e.ArrangementPlaySystem=t=>t.systemFor([n.Context,ArrangementPlay],{runEach(e,s,o){s.audio.resume(),o.setupVoicesIfNeeded(s),o.continuePlaying(s,t.clock)}})},668:function(t,e,s){var o=this&&this.__awaiter||function(t,e,s,o){return new(s||(s=Promise))((function(i,r){function n(t){try{c(o.next(t))}catch(t){r(t)}}function a(t){try{c(o.throw(t))}catch(t){r(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof s?e:new s((function(t){t(e)}))).then(n,a)}c((o=o.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.makeAudioWorkletNodeFactory=e.AudioWorkletProcessor=void 0;const i=s(264);class AudioWorkletProcessor{static get parameterDescriptors(){return[]}}e.AudioWorkletProcessor=AudioWorkletProcessor,AudioWorkletProcessor.workletOptions={},e.makeAudioWorkletNodeFactory=function(t){const e=`data:text/javascript,${encodeURIComponent(t.toString())}; registerProcessor('${t.name}', ${t.name})`;let s=new WeakMap;return i.Context.setupFns.push((t=>o(this,void 0,void 0,(function*(){let o=s.get(t);o||(o=t.audio.audioWorklet.addModule(e),s.set(t,o)),yield o})))),e=>new AudioWorkletNode(e,t.name,t.workletOptions)}},264:function(t,e,s){var o,i=this&&this.__awaiter||function(t,e,s,o){return new(s||(s=Promise))((function(i,r){function n(t){try{c(o.next(t))}catch(t){r(t)}}function a(t){try{c(o.throw(t))}catch(t){r(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof s?e:new s((function(t){t(e)}))).then(n,a)}c((o=o.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.Context=void 0;const r=s(956);class Context{static setup(){return i(this,void 0,void 0,(function*(){const t=new o;return yield Promise.all(o.setupFns.map((e=>e(t)))),t}))}constructor(){this.audio=new AudioContext({sampleRate:44100,latencyHint:"interactive"})}}e.Context=Context,o=Context,Context.componentId=(0,r.registerComponent)(o),Context.setupFns=[]},492:(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.NESNoise=e.NESNoiseProcessor=void 0;const o=s(668);class AudioWorkletProcessor extends o.AudioWorkletProcessor{}class NESNoiseProcessor extends AudioWorkletProcessor{constructor(){super(...arguments),this.travel=0,this.shiftRegister=1,this.inverseSampleRate=.00026360638479979066}static get parameterDescriptors(){return[{name:"freq",defaultValue:440,minValue:0,maxValue:2e4,automationRate:"a-rate"},{name:"gain",defaultValue:0,minValue:0,maxValue:1,automationRate:"a-rate"},{name:"timbre",defaultValue:4,minValue:0,maxValue:4,automationRate:"a-rate"}]}process(t,e,s){var o,i,r;const n=e[0][0];for(let t=0;t<n.length;t++){const e=null!==(o=s.freq[t])&&void 0!==o?o:s.freq[0],a=null!==(i=s.gain[t])&&void 0!==i?i:s.gain[0],c=null!==(r=s.timbre[t])&&void 0!==r?r:s.timbre[0],u=Math.floor(c)+1;for(this.travel+=this.inverseSampleRate*e;this.travel>1;){this.travel-=1;const t=(1&this.shiftRegister)>0!==(this.shiftRegister>>u&1)>0;this.shiftRegister=this.shiftRegister>>1|(t?0:1)<<14}const l=2*(1&this.shiftRegister)-1;n[t]=l*a}return!0}}e.NESNoiseProcessor=NESNoiseProcessor,NESNoiseProcessor.nodeOptions={numberOfInputs:0,numberOfOutputs:1,outputChannelCount:[1]},e.NESNoise=(0,o.makeAudioWorkletNodeFactory)(NESNoiseProcessor)},844:function(t,e,s){var o=this&&this.__createBinding||(Object.create?function(t,e,s,o){void 0===o&&(o=s);var i=Object.getOwnPropertyDescriptor(e,s);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[s]}}),Object.defineProperty(t,o,i)}:function(t,e,s,o){void 0===o&&(o=s),t[o]=e[s]}),i=this&&this.__exportStar||function(t,e){for(var s in t)"default"===s||Object.prototype.hasOwnProperty.call(e,s)||o(e,t,s)};Object.defineProperty(e,"__esModule",{value:!0}),i(s(184),e),i(s(668),e),i(s(264),e),i(s(92),e),i(s(972),e),i(s(492),e)},228:(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.OscAudioWorkletNodeFactory=e.OscAudioWorkletProcessor=void 0;const o=s(668);class AudioWorkletProcessor extends o.AudioWorkletProcessor{}class OscAudioWorkletProcessor extends AudioWorkletProcessor{constructor(){super(...arguments),this.travel=0,this.priorGain=0,this.priorTimbre=0}static get parameterDescriptors(){return[{name:"freq",defaultValue:440,minValue:0,maxValue:2e4,automationRate:"a-rate"},{name:"gain",defaultValue:0,minValue:0,maxValue:1,automationRate:"a-rate"},{name:"timbre",defaultValue:4,minValue:0,maxValue:4,automationRate:"a-rate"}]}process(t,e,s){var o,i,r;const n=e[0][0];for(let t=0;t<n.length;t++){const e=null!==(o=s.freq[t])&&void 0!==o?o:s.freq[0];let a=null!==(i=s.gain[t])&&void 0!==i?i:this.priorGain,c=null!==(r=s.timbre[t])&&void 0!==r?r:this.priorTimbre;if(0===this.priorGain&&(this.travel=1),this.travel+=22675736961451248e-21*e,this.travel<=1)a=this.priorGain,c=this.priorTimbre;else for(;this.travel>1;)this.travel-=1;const{travel:u}=this;let l=0;if(0===c)l=Math.sin(2*u*Math.PI);else if(1===c)l=u<=.25?4*u:u<=.75?2-4*u:4*u-4;else if(2===c)l=1-2*u;else if(c<1){l=(1-c)*Math.sin(2*u*Math.PI)+c*(u<=.25?4*u:u<=.75?2-4*u:4*u-4)}else if(c<2){const t=-.25*c+.5,e=1/t;l=u<=t?u*e:u<1-t?1-(u-t)*(2/(1-2*t)):(u-1)*e}else if(c<3){l=(3-c)*(1-2*u)+(c-2)*(u<=.5?1:-1)}else if(c<=4){const t=.5*Math.pow(.25,c-3);l=this.travel<=t?1:-1}n[t]=l*a,this.priorGain=a,this.priorTimbre=c}return!0}}e.OscAudioWorkletProcessor=OscAudioWorkletProcessor,OscAudioWorkletProcessor.nodeOptions={numberOfInputs:0,numberOfOutputs:1,outputChannelCount:[1]},e.OscAudioWorkletNodeFactory=(0,o.makeAudioWorkletNodeFactory)(OscAudioWorkletProcessor)},92:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.riffSeqToVoiceNotes=e.riffCharCodeToGain=e.riffOctaveAt=e.riffGainAt=e.riffCharCodeToOctave=e.riffScaleNumberToFrequency=e.riffKeyToSemitoneOffset=e.riffScaleNumberToSemitoneOffset=e.riffCharCodeToScaleNumber=e.riffDuration=e.riffComputeStepSizes=void 0;const s="o".charCodeAt(0),o="0".charCodeAt(0),i="p".charCodeAt(0),r="1".charCodeAt(0),n="q".charCodeAt(0),a="2".charCodeAt(0),c="w".charCodeAt(0),u="3".charCodeAt(0),l="e".charCodeAt(0),d="4".charCodeAt(0),h="r".charCodeAt(0),f="5".charCodeAt(0),m="t".charCodeAt(0),y="6".charCodeAt(0),p="y".charCodeAt(0),v="7".charCodeAt(0),b="u".charCodeAt(0),g="8".charCodeAt(0),w="i".charCodeAt(0),A="9".charCodeAt(0),x="-".charCodeAt(0),S=" ".charCodeAt(0),C="0".charCodeAt(0),k="9".charCodeAt(0),P="@".charCodeAt(0),O=" ".charCodeAt(0),E="+".charCodeAt(0),_="-".charCodeAt(0),q=",".charCodeAt(0),M="`".charCodeAt(0),B="^".charCodeAt(0),N="-".charCodeAt(0),V=" ".charCodeAt(0),T="0".charCodeAt(0),R="9".charCodeAt(0),F="@".charCodeAt(0);function j(t){const e=[],s=t.split(""),o=s.length;s.push("|");for(let t=-1;t<o;){const o=s.indexOf("|",t+1);if(t>=0){const s=o-t;e.push(...Array(s).fill(1/s))}t=o}return e}function I(t){switch(t){case s:return-.5;case o:return 0;case i:return.5;case r:return 1;case n:return 1.5;case a:return 2;case c:return 2.5;case u:return 3;case l:return 3.5;case d:return 4;case h:return 4.5;case f:return 5;case m:return 5.5;case y:return 6;case p:return 6.5;case v:return 7;case b:return 7.5;case g:return 8;case w:return 8.5;case A:return 9}throw new Error(`Unknown riff scale code: ${t}`)}function W(t,e){let s=0;for(;t<1;)t+=7,s-=12;for(;t>=8;)t-=7,s+=12;switch(t){case 1:return s+0;case 1.5:return s+1;case 2:return s+2;case 2.5:return s+3;case 3:return s+(e.endsWith("-minor")?3:4);case 3.5:return s+4;case 4:return s+5;case 4.5:return s+6;case 5:return s+7;case 5.5:return s+8;case 6:return s+(e.endsWith("-minor")?8:9);case 6.5:return s+(e.endsWith("-minor")?9:10);case 7:return s+(e.endsWith("-minor")?10:11);case 7.5:return s+11}throw new Error(`Unknown riff scale number: ${t}`)}function U(t){switch(t.split("-")[0]){case"C":return-9;case"C#":case"Db":return-8;case"D":return-7;case"D#":case"Eb":return-6;case"E":return-5;case"F":return-4;case"F#":case"Gb":return-3;case"G":return-2;case"G#":case"Ab":return-1;case"A":return 0;case"A#":case"Bb":return 1;case"B":return 2}throw new Error(`Unknown riff key: ${t}`)}function L(t,e,s){const o=U(s)+W(t,s);return 440*Math.pow(2,e-4+o/12)}function D(t,e){if(t>=C&&t<=k)return t-C;if(t===P)return 10;if(t===O)return e;if(t===E)return e+1;if(t===_)return e-1;if(isNaN(t))return e;throw new Error(`Unknown riff octave code: ${t}`)}function K(t,e){var s;let o=1;if(!t.vol)return o;for(let i=0;i<=e;i++)o=null!==(s=G(t.vol.charCodeAt(i)))&&void 0!==s?s:o;return o}function $(t,e){let s=4;if(!t.oct)return s;for(let o=0;o<=e;o++)s=D(t.oct.charCodeAt(o),s);return s}function G(t){if(t>=T&&t<=R)return(t-T)/10;if(t===F)return 1;if(t!==V&&!isNaN(t))throw new Error(`Unknown riff volume code: ${t}`)}function z(t,e,s,o){var i;let r=0,n=s;for(;n<e.length&&o(e.charCodeAt(n),n);n++)r+=null!==(i=t[n])&&void 0!==i?i:0;return{duration:r,stepCount:n-s}}function Z(t,e,s,o,i){var r,n;if(!t.gls)return;const a=60/t.bpm,c=z(e,t.gls,s,(t=>t===i)),u=I(t.gls.charCodeAt(s+c.stepCount))*(i===q?-1:1),l=o.duration-(null!==(r=e[s])&&void 0!==r?r:0)*a,d=l+c.duration*a,h=L(o.scaleNumber+u,$(t,s),t.key)-o.freqBase;o.freqSlides=null!==(n=o.freqSlides)&&void 0!==n?n:[],o.freqSlides.push({timeStart:l,timeEnd:d,deltaStart:h,deltaEnd:0})}function X(t,e,s,o){var i,r,n,a;if(!t.gls)return;const c=60/t.bpm,u=(null!==(i=e[s])&&void 0!==i?i:0)*c,l=z(e,t.gls,s,((t,e)=>e===s||t===N)),d=l.duration*c,h=l.stepCount,f=function(t,e,s){for(let o=e;o<s;o++){const e=t.seq.charCodeAt(o);if(e!==x&&e!==S)return{scaleNumber:I(e),octave:$(t,o)}}}(t,s,s+h);if(!f)return;o.freqSlides=null!==(r=o.freqSlides)&&void 0!==r?r:[];const m=o.duration-u,y=m+d,p=null!==(a=null===(n=o.freqSlides[o.freqSlides.length-1])||void 0===n?void 0:n.deltaEnd)&&void 0!==a?a:0,v=L(f.scaleNumber,f.octave,t.key)-o.freqBase;o.freqSlides.push({timeStart:m,timeEnd:y,deltaStart:p,deltaEnd:v})}e.riffComputeStepSizes=j,e.riffDuration=function(t){var e;const s=60/t.bpm,o=j(t.div);let i=0;for(let r=0;r<t.seq.length;r++)i+=(null!==(e=o[r])&&void 0!==e?e:0)*s;return i},e.riffCharCodeToScaleNumber=I,e.riffScaleNumberToSemitoneOffset=W,e.riffKeyToSemitoneOffset=U,e.riffScaleNumberToFrequency=L,e.riffCharCodeToOctave=D,e.riffGainAt=K,e.riffOctaveAt=$,e.riffCharCodeToGain=G,e.riffSeqToVoiceNotes=function(t){var e,s,o,i,r,n;const a=60/t.bpm,c=j(t.div),u=[];let l,d=0;for(let h=0;h<t.seq.length;h++){const f=(null!==(e=c[h])&&void 0!==e?e:0)*a,m=t.seq.charCodeAt(h),y=null===(s=t.gls)||void 0===s?void 0:s.charCodeAt(h),p=null===(o=t.vol)||void 0===o?void 0:o.charCodeAt(h);if(m===x)l&&(l.duration+=f);else if(m===S);else if(!l||y!==B&&y!==N){const e=I(m),s=$(t,h);l={duration:f,freqBase:L(e,s,t.key),scaleNumber:e,octave:s},u.push([d,l]);const o=K(t,h);1!=o&&void 0===G(null!=p?p:0)&&(null!==(i=l.gainEvents)&&void 0!==i||(l.gainEvents=[]),l.gainEvents.push({time:0,gain:o}))}else l&&(l.duration+=f);if(l&&y){const e=null===(r=t.gls)||void 0===r?void 0:r.charCodeAt(h-1);y===B&&e!==B?X(t,c,h,l):y===q&&e!==q?Z(t,c,h,l,q):y===M&&e!==M&&Z(t,c,h,l,M)}if(l&&p){const t=G(p);void 0!==t&&(null!==(n=l.gainEvents)&&void 0!==n||(l.gainEvents=[]),l.gainEvents.push({time:l.duration-f,gain:t}))}d+=f}return u.forEach((([t,e])=>{delete e.scaleNumber,delete e.octave})),u}},972:(t,e,s)=>{var o;Object.defineProperty(e,"__esModule",{value:!0}),e.Voice=void 0;const i=s(956),r=s(92),n=s(228);function a(t){return t.createGain().gain}class Voice{constructor(t,e){var s,o,i,r,c;this.context=t,this.config=e;const u=(null!==(s=this.config.worklet)&&void 0!==s?s:n.OscAudioWorkletNodeFactory)(t.audio),l=t.audio.createGain(),d=t.audio.createStereoPanner();u.connect(l),l.connect(d),d.connect(t.audio.destination),this.freq=null!==(o=u.parameters.get("freq"))&&void 0!==o?o:a(t.audio),this.gain=null!==(i=u.parameters.get("gain"))&&void 0!==i?i:a(t.audio),this.timbre=null!==(r=u.parameters.get("timbre"))&&void 0!==r?r:a(t.audio),this.finalGain=l.gain,this.finalPan=d.pan,this.freq.value=440,this.gain.value=0,this.timbre.value=null!==(c=this.config.timbre)&&void 0!==c?c:0,this.finalGain.value=this.config.gain,this.finalPan.value=this.config.pan}applyRiff(t,e=0){(0,r.riffSeqToVoiceNotes)(t).forEach((([t,s])=>{this.scheduleNote(t+e,s)}))}scheduleNote(t,e){const s=t,o=s+e.duration,{gain:i,freq:r}=this;r.setValueAtTime(e.freqBase,s),e.freqSlides&&e.freqSlides.forEach((t=>{r.setValueAtTime(e.freqBase+t.deltaStart,s+t.timeStart),r.exponentialRampToValueAtTime(e.freqBase+t.deltaEnd,s+t.timeEnd)})),i.cancelScheduledValues(s),i.setValueAtTime(0,s),i.linearRampToValueAtTime(1,s+0),e.gainEvents&&e.gainEvents.forEach((({time:t,gain:e})=>{i.setValueAtTime(e,s+t)})),i.cancelScheduledValues(o-.01),i.setValueAtTime(0,o-.01),i.linearRampToValueAtTime(0,o)}}e.Voice=Voice,o=Voice,Voice.componentId=(0,i.registerComponent)(o)},608:function(t,e,s){var o=this&&this.__createBinding||(Object.create?function(t,e,s,o){void 0===o&&(o=s);var i=Object.getOwnPropertyDescriptor(e,s);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[s]}}),Object.defineProperty(t,o,i)}:function(t,e,s,o){void 0===o&&(o=s),t[o]=e[s]}),i=this&&this.__exportStar||function(t,e){for(var s in t)"default"===s||Object.prototype.hasOwnProperty.call(e,s)||o(e,t,s)};Object.defineProperty(e,"__esModule",{value:!0}),e.Onyx=void 0,e.Onyx=s(844),i(s(844),e)}},e={};function s(o){var i=e[o];if(void 0!==i)return i.exports;var r=e[o]={exports:{}};return t[o].call(r.exports,r,r.exports,s),r.exports}s.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),(()=>{var t=s(956),e=s(608);const o=181,i="C-minor",r={bpm:o,key:i,div:"|   |   |   |   |   |   |   |   ",seq:"5 5 1-5 5 5 1-5 5 5 1-5 5 5 1-5 ",gls:"    ,,8     ,,8     ,,8     ,,8 ",oct:"7   6 7 7   6 7 7   6 7 7   6 7 ",vol:"6   @ 6 6   @ 6 6   @ 6 6   @ 6 "},n={bpm:o,key:i,div:"| | | | | | | | ",seq:"3533513553335335",oct:"2442444244244244"},a={bpm:o,key:i,div:"| | | | | | | | ",seq:"2422402542224224",oct:"2442444244244244"},c={bpm:o,key:i,div:"|   |   |   |   |   |   |   |   ",seq:" 3-5-3-3-5-1-3-5-5-3-3-3-5-3-3-5",oct:" 2 4 4 2 4 4 4 2 4 4 2 4 4 2 4 4",vol:"8"},u={bpm:o,key:i,div:"|   |   |   |   |   |   |   |   ",seq:" 2-4-2-2-4-0-2-5-4-2-2-2-4-2-2-4",oct:" 2 4 4 2 4 4 4 2 4 4 2 4 4 2 4 4",vol:"8"},l={bpm:o,key:i,div:"|   |   |   |   |   |   |   |   ",seq:"1---3-1-  0-3-1-1---3-1-  0-3-1-",gls:"    ``5     ``5     ``5     ``5 "},d={bpm:o,key:i,div:"|   |   |   |   |   |   |   |   ",seq:"2---3-2-  1-3-2-2---3-2-  1-3-2-",gls:"    ``5     ``5     ``5     ``5 "},h={bpm:o,key:i,div:"|   |   |   |   |   |   |   |   ",seq:"2---3-2-  1-3-2-p---3-2-  p-3-2-",gls:"    ``5     ``5     ``5     ``5 "},f={voices:{leadL:{timbre:3,gain:.1,pan:-.33},leadR:{timbre:3,gain:.08,pan:.33},leadC:{timbre:3,gain:.08,pan:0},bass:{timbre:1,gain:.5,pan:0},noise:{timbre:0,gain:.08,pan:0,worklet:e.Onyx.NESNoise}},sections:{walk:{leadL:[l,d,l,h],leadR:[c,u,c,u],bass:[n,a,n,a],noise:[r,r,r,r]}},loop:["walk"]},m=173,y="Bb-minor",p={bpm:m,key:y,div:"|   |   |   |   |   |   |   |   ",seq:"5-555-553-5-  4-  7-7-7-7-7-5-5-",gls:",,1               ,,p   ,,p ",vol:"@ 86@ 86  8       @ 8 8 @ 8 9 6",oct:"4                 -"},v={bpm:m,key:y,div:"|   |   |   |   |   |   |   |   ",seq:"8-531-815-3-  2- ",gls:",,1              ",vol:"2 424 646 8      ",oct:"4       5        "},b={bpm:m,key:y,div:"|   |   |   |   |   |   |   |   ",seq:"5 1-- 551-- 5 1----- ",gls:"  ,,,8  ,,,8  ,,,,,,8",oct:"7 6   766   6 7   ",vol:"6 @   68@   4 987631"},g={bpm:m,key:y,div:"|   |   |   |   |   |   |   |   ",seq:"1---  1---  1-2---",gls:"`9    `9    `9,1  ",vol:"@@6@  @@6@  @6@@6@",oct:"1"},w={bpm:m,key:y,div:"||||||       |   ||",seq:"         0-247---",vol:"         3 59@631",oct:"9"},A={bpm:m,key:y,div:"|   |   |   |   |   |   |   |   ",seq:"5 5 1-5 5 5 1-5 5 5 1-5 5 5 1-5 ",gls:"    ,,8     ,,8     ,,8     ,,8 ",oct:"7   6 7 7   6 7 7   6 7 7   6 7 ",vol:"6   @ 6 6   @ 6 6   @ 6 6   @ 6 "},x={bpm:m,key:y,div:"|   |   |   |   |   |   |   |   |   |   |   |   |   |   |   |   ",seq:"1-1-1-1-  1-3-5-0-0 0-0 4-4-1-1-6-6-6-6-  6-1-3-0-0-0-0-  0-4-7-",vol:"@6@6@6@6  @6@   @6@ @6@ @6@6@6@6@6@6@6@6  @6@   @6@6@6@6  @6@   ",gls:"`9    `9    `7  `9      `9  `9  `9    `9    `7  `9    `9    `6  ",oct:"1                       0       0         0 1   1         1     "},S={bpm:m,key:y,div:"| | | | | | | | | | | | | | | | ",seq:"51035451045337206313487479742904",oct:"24423234244142442442424424424244",vol:"456"},C={bpm:m,key:y,div:"|   |   |   |   |   |   |   |   |   |   |   |   |   |   |   |   ",seq:"8-531-815-3-  2-  815-3-  2-  0-8-631-816-3-  2-  7-  4-  7-    ",gls:",,1                                                             ",vol:"4 626 846 8       646 8   6   2 4 624 646 8       6             ",oct:"4       5         4 5           4       5         4             "},k={bpm:m,key:y,div:"|   |   |   |   |   |   |   |   |   |   |   |   |   |   |   |   ",seq:"5-------- 1-3-7-  6-  5---3-4-5------ 8------ 9------ 4------",vol:"@49382716 @4@4@4  @4  @493@4@4@493827 @493827 @493827 @493827",gls:",q"},P={bpm:m,key:y,div:"|   |   |   |   |   |   |   |   |   |   |   |   |   |   |   |   ",seq:"  9---8-5---7-8-3-2---3---2-3-5-----------4-2-7-----------9-7-4-",vol:"  @49382@493@49382@493@4938271@493827161417182@4938271614193@4@4",gls:"  ,,1                                                     ,1    ",oct:"4               5                                           4   "},O={bpm:m,key:y,div:"|   |   |   |   |   |   |   |   |   |   |   |   |   |   |   |   ",seq:"5-------- 1-3-7-  6-  5---3-4-5------ 8------ 9---4-7-9-7------",vol:"@49382716 @4@4@4  @4  @493@4@4@493827 @493827 @493827   @493827",gls:",q                                                      ,q",oct:"4                                                       5"},E={bpm:m,key:y,div:"|       |   |   |   |   |   |   |   |   |   |   |   |   |   |   |   ",seq:"    7-7-3-7-5------                                           3-3-3-",vol:"    @4@48   @493827                                           7193@4",gls:"    ,p      ,,1                                               ,1    ",oct:"4           5                                                       "},_={bpm:m,key:y,div:"|   |   |   |   |   |   |   |   ",seq:"1-5---1-5---1-5---5 5 5 5 5 5 5 ",gls:",,5   ,,5   ,,5                 ",oct:"6     6     6     7   7   7   7 ",vol:"@86421@86421@864214 5 6 7 8 9 @ "},q={bpm:m,key:y,div:"|   |   |   |   |   |   |   |   |   |   |   |   |   |   |   |   ",seq:"6---6-6-  5-6---  1-6-5-  4-  3-1---1-1-  0-1---",vol:"@686@6@6  @6@     @6@ @6  @6    @686@6@6  @6@   ",gls:"`9    `9    `9      `3    `1    `9    `9    `9",oct:"0                 1             1"},M={bpm:m,key:y,div:"|   |   |   |   |   |   |   |   |   |   |   |   |   |   |   |   ",seq:"4---4-4-  3-4---  1-7-4-  3-  8-7---7-7-  6-7---",vol:"@ 8 @6@6  @6@     @6@ @6  @6    @ 8 @6@6  @6@   ",gls:"`9    `9    `9      `2    `2    `9    `9    `9",oct:"0                 1             0"},B={bpm:m,key:y,div:"|   |   |   |   |   |   |   |   |   |   |   |   |   |   |   |   ",seq:"4---4-4-  3-4---  6-------5-4-3-5---5-5-  4-5---",vol:"@ 8 @6@6  @6@     @8      @8@8@8@ 8 @6@6  @6@   ",gls:"`9    `9    `9    `3  `3  `4    `9    `9    `9",oct:"0                 1             0"},N={bpm:m,key:y,div:"| | | | | | | | | | | | | | | | ",seq:"61313638034373715013038597355193",oct:"24424424254144242442442424424424",vol:"6"},V={bpm:m,key:y,div:"| | | | | | | | | | | | | | | | ",seq:"61414863442664714012028497244092",oct:"24424425255144242442442424424424",vol:"6"},T={bpm:m,key:y,div:"| | | | | | | | | | | | | | | | ",seq:"61414863442664715p1p254u295u425p",oct:"24424425255144242442443434424424",vol:"6"},R={bpm:m,key:y,div:"|   |   |   |   |   |   |   |   |   |   |   |   |   |   |   |   ",seq:"3---3---3-5---4---2---    1-4-5-------    1-4-7-----  9-------- ",gls:",,1       `p      `p      ,,1             ,,1                   ",vol:"@ 93@ 93@4@ 93@ 93@ 93    @ @4@ 93        @ @4@ 93    @ 93      ",oct:"5"},F={bpm:m,key:y,div:"|   |   |   |   |   |   |   |   |   |   |   |   |   |   |   |   ",seq:"      3-- 2-- 3-- 4-5-0-----      1-4-5-----  7---6---5---4---3-",gls:"                  ,,2                         ,,2               ",vol:"      31  31  31  3   3 21        5   5 41    5 415 415 415 41  "},j={bpm:m,key:y,div:"|   |   |   |   |   |   |   |   |   |   |   |   |   |   |   |   ",seq:"  3---2-5---          6---5-3-7-------                    3-3-3-",vol:"  @ 93@4@ 93          @ 93@4@4@ 92                        7193@4",gls:"  ,,q                 ,,q                                 ,1    ",oct:"  6     5                                                       "},I={bpm:m,key:y,div:"|   |   |   |   |   |   |   |   |   |   |   |   |   |   |   |   ",seq:"          3---2-5-------          3-4-6---5-3-1-5-----4-------- ",gls:"          ,,q                                                   ",vol:"          5 41545 41              3 4 5 415 4 3 5 41  5 41      ",oct:"          5     4"},W={voices:{leadL:{timbre:2.75,gain:.08,pan:-.7},leadR:{timbre:2.75,gain:.08,pan:.7},leadC:{timbre:3,gain:.1,pan:0},bass:{timbre:1.1,gain:.5,pan:0},drums:{timbre:0,gain:.08,pan:0,worklet:e.Onyx.NESNoise},noise:{timbre:5,gain:.1,pan:0,worklet:e.Onyx.NESNoise}},sections:{intro:{leadL:[p],leadR:[v],bass:[g],drums:[b],noise:[w]},main1:{leadC:[k],leadL:[S],leadR:[C],bass:[x],drums:[A,A]},main2:{leadC:[P],leadL:[S],leadR:[C],bass:[x],drums:[A,A]},main3:{leadC:[O],leadL:[S],leadR:[C],bass:[x],drums:[A,A]},main4:{leadC:[E],leadL:[S],leadR:[C],bass:[x],drums:[A,A]},mid1:{leadC:[R],leadL:[N],leadR:[F],bass:[q],drums:[_,_]},mid2:{leadC:[j],leadL:[V],leadR:[I],bass:[M],drums:[_,_]},mid4:{leadL:[T],bass:[B],drums:[_,_]}},pre:["intro"],loop:["main1","main2","main3","main4","mid1","mid2","mid1","mid4"]},U=new t.World;U.addSystems([e.Onyx.ArrangementPlaySystem(U)]);const L=t=>{U.clock.tick(t),requestAnimationFrame(L)};requestAnimationFrame(L);const D=U.create(),K=t=>{const s=new e.Onyx.ArrangementPlay(t);s.setupVoicesIfNeeded($),U.set(D,[$,s])};let $;e.Onyx.Context.setup().then((t=>{$=t;const e=()=>{console.log(window.location.hash),"#bubble-man"===window.location.hash?K(f):"#blossoming-blade"===window.location.hash&&K(W)};window.addEventListener("hashchange",e),e()}))})()})();